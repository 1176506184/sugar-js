{"version":3,"file":"sugar.umd.js","sources":["../packages/sugar-hook/src/hooks/onMounted.ts","../packages/sugar-compiler/src/utils.ts","../packages/sugar-compiler/src/parse.ts","../packages/sugar-compiler/src/toAst.ts","../packages/sugar-shared/src/nodeOps.ts","../packages/sugar-shared/src/index.ts","../packages/sugar-compiler/src/transform.ts","../packages/sugar-compiler/src/transform/sIf.ts","../packages/sugar-compiler/src/codegen.ts","../packages/sugar-compiler/src/transform/sFor.ts","../packages/sugar-compiler/src/transform/sHtml.ts","../packages/sugar-compiler/src/transform/sLoading.ts","../packages/sugar-compiler/src/transform/transformEvent.ts","../packages/sugar-compiler/src/transform/sModel.ts","../packages/sugar-compiler/src/compile.ts","../packages/sugar-compiler/src/index.ts","../packages/sugar-render/src/utils.ts","../packages/sugar-render/src/componentCache.ts","../packages/sugar-reactive/src/nextTick.ts","../packages/sugar-reactive/src/scheduler.ts","../packages/sugar-reactive/src/dep.ts","../packages/sugar-reactive/src/ref.ts","../packages/sugar-reactive/src/reactive.ts","../packages/sugar-reactive/src/defineProps.ts","../packages/sugar-render/src/component.ts","../packages/sugar-render/src/patch.ts","../packages/sugar-render/src/index.ts","../packages/sugar-core/src/utils/utils.ts","../packages/sugar-core/src/index.ts","../packages/sugar/src/main.ts"],"sourcesContent":["import { type MountHandleList, type MountHandler } from '../types';\n\nlet mountHandleList: MountHandleList = {};\nlet ActiveId: string = '';\n\nfunction onMounted(handle: MountHandler) {\n  if (!mountHandleList[ActiveId]) {\n    mountHandleList[ActiveId] = [];\n  }\n\n  mountHandleList[ActiveId].push({\n    used: false,\n    fun: handle,\n  });\n}\n\nfunction updateActiveId(id: string) {\n  ActiveId = id;\n}\n\nfunction clearMounted() {\n  mountHandleList = {};\n}\n\nexport { onMounted, mountHandleList, clearMounted, updateActiveId };\n","export const isArray = Array.isArray;\n\nexport const extend = Object.assign;\n\n// 判断一个字符串是否是合法的变量标识符（不能包含操作符、点、括号等）\nfunction isSimpleIdentifier(exp: string): boolean {\n  return /^[A-Za-z_$][\\w$]*$/.test(exp);\n}\n\n// 判断表达式是否是“静态的”（即可以在编译期确定的）\nexport function isStaticExpression(exp: string): boolean {\n  // 1. 如果是合法的变量名：静态（如 @click=\"handleClick\"）\n  if (isSimpleIdentifier(exp)) {\n    return true;\n  }\n\n  // 2. 如果包含函数调用、操作符、箭头函数等，认为是动态\n  // 这只是一个简单的启发式判断\n  const dynamicKeywords = ['(', ')', '=>', '+', '-', '*', '/', '.', '[', ']'];\n\n  for (const keyword of dynamicKeywords) {\n    if (exp.includes(keyword)) {\n      return false;\n    }\n  }\n\n  // 默认认为是静态\n  return true;\n}\n","import { extend, isArray, isStaticExpression } from './utils';\n\nconst scopeStack: any[] = [];\n\nfunction enterScope(newScope: any) {\n  scopeStack.push(newScope);\n}\n\nfunction exitScope() {\n  scopeStack.pop();\n}\n\nexport function parse(context: any, ancestors: any) {\n  const parent: any = last(ancestors);\n  const nodes = [];\n  while (!isEnd(context, ancestors)) {\n    const s = context.source;\n    let node: any;\n    if (startsWith(s, context.options.delimiters[0])) {\n      node = parseInterpolation(context);\n    } else if (s[0] === '<') {\n      if (s.length === 1) {\n        // 什么都不做\n      } else if (s[1] === '/') {\n        if (s[2] === '>') {\n          advanceBy(context, 3);\n          continue;\n        } else if (/[a-z]/i.test(s[2])) {\n          parseTag(context, TagType.End, parent);\n          continue;\n        } else {\n          node = parseComment(context);\n        }\n      } else if (/[a-z]/i.test(s[1])) {\n        node = parseElement(context, ancestors);\n      } else if (s[1] === '!') {\n        node = parseComment(context);\n      }\n    }\n\n    if (!node) {\n      node = parseText(context);\n    }\n\n    if (isArray(node)) {\n      for (let i = 0; i < node.length; i++) {\n        pushNode(nodes, node[i]);\n      }\n    } else {\n      pushNode(nodes, node);\n    }\n  }\n\n  let removedWhitespace = false;\n\n  const shouldCondense = context.options.whitespace !== 'preserve';\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    if (node.type === NodeTypes.TEXT) {\n      if (!context.inPre) {\n        if (!/[^\\t\\r\\n\\f ]/.test(node.content)) {\n          const prev = nodes[i - 1];\n          const next = nodes[i + 1];\n          if (\n            !prev ||\n            !next ||\n            (shouldCondense &&\n              ((prev.type === NodeTypes.COMMENT && next.type === NodeTypes.COMMENT) ||\n                (prev.type === NodeTypes.COMMENT && next.type === NodeTypes.ELEMENT) ||\n                (prev.type === NodeTypes.ELEMENT && next.type === NodeTypes.COMMENT) ||\n                (prev.type === NodeTypes.ELEMENT &&\n                  next.type === NodeTypes.ELEMENT &&\n                  /[\\r\\n]/.test(node.content))))\n          ) {\n            removedWhitespace = true;\n            nodes[i] = null as any;\n          } else {\n            // Otherwise, the whitespace is condensed into a single space\n            node.content = ' ';\n          }\n        } else if (shouldCondense) {\n          // in condense mode, consecutive whitespaces in text are condensed\n          // down to a single space.\n          node.content = node.content.replace(/[\\t\\r\\n\\f ]+/g, ' ');\n        }\n      } else {\n        // #6410 normalize windows newlines in <pre>:\n        // in the DOM\n        node.content = node.content.replace(/\\r\\n/g, '\\n');\n      }\n    } else if (node.type === NodeTypes.COMMENT && !context.options.comments) {\n      removedWhitespace = true;\n      nodes[i] = null as any;\n    }\n  }\n\n  if (context.inPre && parent && context.options.isPreTag(parent.tag)) {\n    // remove leading newline per html spec\n    // https://html.spec.whatwg.org/multipage/grouping-content.html#the-pre-element\n    const first = nodes[0];\n    if (first && first.type === NodeTypes.TEXT) {\n      first.content = first.content.replace(/^\\r?\\n/, '');\n    }\n  }\n\n  return removedWhitespace ? nodes.filter(Boolean) : nodes;\n}\n\nfunction parseAttributes(context: any, type: any) {\n  const props = [];\n  const attributeNames = new Set<string>();\n  // ✅ 提前检查当前标签是否含有 s-for=\"(item,index) in xxx\"\n  const firstTagMatch = context.source\n    .slice(0, context.source.indexOf('>'))\n    .match(/s-for\\s*=\\s*[\"']\\s*\\(([^)]+)\\)\\s+in\\s+[^\"']+[\"']/);\n  if (firstTagMatch) {\n    const aliases = firstTagMatch[1].split(',').map((s) => s.trim());\n    enterScope(aliases);\n  } else if (type === 0) {\n    enterScope([]);\n  }\n\n  while (\n    context.source.length > 0 &&\n    !startsWith(context.source, '>') &&\n    !startsWith(context.source, '/>')\n  ) {\n    if (startsWith(context.source, '/')) {\n      advanceBy(context, 1);\n      advanceSpaces(context);\n      continue;\n    }\n\n    const attr = parseAttribute(context, attributeNames);\n    if (['s-if', 's-html'].includes(attr.name)) {\n      attr.value.content = bindCtx(attr.value.content);\n    }\n\n    if (attr.name === 's-for') {\n      const tar = attr.value.content.split(' in ');\n      attr.value.content = tar[0] + ' in ' + bindCtx(tar[1]);\n    }\n\n    if (attr.type === NodeTypes.ATTRIBUTE && attr.value && attr.name === 'class') {\n      attr.value.content = attr.value.content.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (type === TagType.Start) {\n      props.push(attr);\n    }\n    advanceSpaces(context);\n  }\n  return props;\n}\n\nfunction parseAttribute(context: any, nameSet: any) {\n  const start = getPos(context);\n  const match = /^[^\\t\\r\\n\\f />][^\\t\\r\\n\\f />=]*/.exec(context.source)!;\n\n  const name = match[0];\n  nameSet.add(name);\n  advanceBy(context, name.length);\n  let value;\n  if (/^[\\t\\r\\n\\f ]*=/.test(context.source)) {\n    advanceSpaces(context);\n    advanceBy(context, 1);\n    advanceSpaces(context);\n    value = parseAttributeValue(context);\n  }\n\n  const loc = getSelection(context, start);\n  if (!context.inVPre && /^(v-[A-Za-z0-9-]|:|\\.|@|#)/.test(name)) {\n    const match = /(?:^v-([a-z0-9-]+))?(?:(?::|^\\.|^@|^#)(\\[[^\\]]+\\]|[^\\.]+))?(.+)?$/i.exec(name)!;\n    const isPropShorthand = startsWith(name, '.');\n    const dirName =\n      match[1] ||\n      (isPropShorthand || startsWith(name, ':')\n        ? 'bind'\n        : startsWith(name, '@') || startsWith(name, 's-on:')\n          ? 'on'\n          : 'slot');\n    let arg: { type: NodeTypes; content: string; loc: { start: any; end: any; source: any } };\n    if (match[2]) {\n      const isSlot = dirName === 'slot';\n      const startOffset = name.lastIndexOf(match[2], name.length - (match[3]?.length || 0));\n\n      const loc = getSelection(\n        context,\n        getNewPosition(context, start, startOffset),\n        getNewPosition(\n          context,\n          start,\n          startOffset + match[2].length + ((isSlot && match[3]) || '').length,\n        ),\n      );\n\n      let content = match[2];\n\n      if (content.startsWith('[')) {\n        if (!content.endsWith(']')) {\n          content = content.slice(1);\n        } else {\n          content = content.slice(1, content.length - 1);\n        }\n      } else if (isSlot) {\n        content += match[3] || '';\n      }\n\n      arg = {\n        type: NodeTypes.SIMPLE_EXPRESSION,\n        content,\n        loc,\n      };\n    }\n\n    if (value?.isQuoted) {\n      const valueLoc = value.loc;\n      valueLoc.start.offset++;\n      valueLoc.start.column++;\n      valueLoc.end = advancePosWithClone(valueLoc.start, value.content);\n      valueLoc.source = valueLoc.source.slice(1, -1);\n    }\n\n    const modifiers = match[3] ? match[3].slice(1).split('.') : [];\n    if (isPropShorthand) modifiers.push('prop');\n\n    return {\n      type: NodeTypes.DIRECTIVE,\n      name: dirName,\n      exp: value && {\n        type: NodeTypes.SIMPLE_EXPRESSION,\n        content: bindCtx(value.content),\n        loc: value.loc,\n        isStatic: !isStaticExpression(value.content),\n      },\n      arg,\n      modifiers,\n      loc,\n    };\n  }\n\n  return {\n    type: NodeTypes.ATTRIBUTE,\n    name,\n    value: value && {\n      type: NodeTypes.TEXT,\n      content: value.content,\n      loc: value.loc,\n    },\n    loc,\n  };\n}\n\nfunction getNewPosition(context: any, start: any, numberOfCharacters: number) {\n  return advancePosWithClone(\n    start,\n    context.originalSource.slice(start.offset, numberOfCharacters),\n    numberOfCharacters,\n  );\n}\n\nfunction parseAttributeValue(context: any) {\n  const start = getPos(context);\n  let content: string;\n\n  const quote = context.source[0];\n  const isQuoted = quote === '\"' || quote === \"'\";\n\n  if (isQuoted) {\n    // Quoted value.\n    advanceBy(context, 1);\n\n    const endIndex = context.source.indexOf(quote);\n    if (endIndex === -1) {\n      content = parseTextData(context, context.source.length);\n    } else {\n      content = parseTextData(context, endIndex);\n      advanceBy(context, 1);\n    }\n  } else {\n    // Unquoted\n    const match = /^[^\\t\\r\\n\\f >]+/.exec(context.source);\n    if (!match) {\n      return undefined;\n    }\n    content = parseTextData(context, match[0].length);\n  }\n\n  return {\n    content,\n    isQuoted,\n    loc: getSelection(context, start),\n  };\n}\n\nfunction pushNode(nodes: any, node: any): void {\n  if (node.type === NodeTypes.TEXT) {\n    const prev: any = last(nodes);\n    // Merge if both this and the previous node are text and those are\n    // consecutive. This happens for cases like \"a < b\".\n    if (prev && prev.type === NodeTypes.TEXT && prev.loc.end.offset === node.loc.start.offset) {\n      prev.content += node.content;\n      prev.loc.end = node.loc.end;\n      prev.loc.source += node.loc.source;\n      return;\n    }\n  }\n\n  nodes.push(node);\n}\n\nfunction parseElement(context: any, ancestors: any) {\n  const parent = last(ancestors);\n  const element: any = parseTag(context, TagType.Start, parent);\n  if (element.isSelfClosing || context.options.isVoidTag(element.tag)) {\n    return element;\n  }\n  ancestors.push(element);\n  const children = parse(context, ancestors);\n  ancestors.pop();\n  element.children = children;\n  if (startsWithEndTagOpen(context.source, element.tag)) {\n    parseTag(context, TagType.End, parent);\n  }\n  element.loc = getSelection(context, element.loc.start);\n  return element;\n}\n\nfunction parseTag(context, type, parent) {\n  const start = getPos(context);\n  const match = /^<\\/?([a-z][^\\t\\r\\n\\f />]*)/i.exec(context.source)!;\n  const tag = match[1];\n\n  advanceBy(context, match[0].length);\n  advanceSpaces(context);\n\n  const props = parseAttributes(context, type);\n\n  let isSelfClosing = false;\n\n  if (context.source.length !== 0) {\n    isSelfClosing = startsWith(context.source, '/>');\n    advanceBy(context, isSelfClosing ? 2 : 1);\n  }\n\n  if (type === TagType.End) {\n    exitScope();\n    return;\n  }\n\n  const tagType = ElementTypes.ELEMENT;\n\n  return {\n    type: NodeTypes.ELEMENT,\n    tag,\n    tagType,\n    children: [],\n    props,\n    isSelfClosing,\n    loc: getSelection(context, start),\n  };\n}\n\nconst enum TagType {\n  Start,\n  End,\n}\n\nexport const enum ElementTypes {\n  ELEMENT,\n}\n\nexport const enum Namespaces {\n  HTML,\n}\n\nfunction parseComment(context: any) {\n  const start = getPos(context);\n  const contentStart = context.source[1] === '?' ? 1 : 2;\n  let content: string;\n\n  const closeIndex = context.source.indexOf('-->') + 2;\n  if (closeIndex === -1) {\n    content = context.source.slice(contentStart);\n    advanceBy(context, context.source.length);\n  } else {\n    content = context.source.slice(contentStart, closeIndex);\n    advanceBy(context, closeIndex + 1);\n  }\n\n  return {\n    type: NodeTypes.COMMENT,\n    content,\n    loc: getSelection(context, start),\n  };\n}\n\nfunction isEnd(context, ancestors) {\n  const s = context.source;\n  if (startsWith(s, '</')) {\n    for (let i = ancestors.length - 1; i >= 0; --i) {\n      if (startsWithEndTagOpen(s, ancestors[i].tag)) {\n        return true;\n      }\n    }\n  }\n  return !s;\n}\n\nfunction parseInterpolation(context) {\n  const [open, close] = context.options.delimiters;\n  const closeIndex = context.source.indexOf(close, open.length);\n  const start = getPos(context);\n  advanceBy(context, open.length);\n  const innerStart = getPos(context);\n  const innerEnd = getPos(context);\n  const rawContentLength = closeIndex - open.length;\n  const rawContent = context.source.slice(0, rawContentLength);\n  const preTrimContent = matchText(context, rawContentLength);\n  const content = preTrimContent.trim();\n  const startOffset = preTrimContent.indexOf(content);\n  if (startOffset > 0) {\n    advancePos(innerStart, rawContent, startOffset);\n  }\n  const endOffset = rawContentLength - (preTrimContent.length - content.length - startOffset);\n  advancePos(innerEnd, rawContent, endOffset);\n  advanceBy(context, close.length);\n  return {\n    type: NodeTypes.INTERPOLATION,\n    content: {\n      type: NodeTypes.SIMPLE_EXPRESSION,\n      content: bindCtx(content),\n      loc: getSelection(context, innerStart, innerEnd),\n    },\n    loc: getSelection(context, start),\n  };\n}\n\nfunction parseText(context) {\n  const endTokens = ['<', context.options.delimiters[0]];\n  let endIndex = context.source.length;\n  for (let i = 0; i < endTokens.length; i++) {\n    const index = context.source.indexOf(endTokens[i], 1);\n    if (index !== -1 && endIndex > index) {\n      endIndex = index;\n    }\n  }\n\n  const start = getPos(context);\n  const content = parseTextData(context, endIndex);\n\n  return {\n    type: NodeTypes.TEXT,\n    content,\n    loc: getSelection(context, start),\n  };\n}\n\nfunction parseTextData(context: any, length: any) {\n  const rawText = context.source.slice(0, length);\n  advanceBy(context, length);\n  return rawText;\n}\n\nfunction getSelection(context: any, start: any, end?: any) {\n  end = end || getPos(context);\n  return {\n    start,\n    end,\n    source: context.originalSource.slice(start.offset, end.offset),\n  };\n}\n\nfunction matchText(context: any, length: any) {\n  const rawText = context.source.slice(0, length);\n  advanceBy(context, length);\n  return rawText;\n}\n\nfunction advanceBy(context: any, numberOfCharacters: number): void {\n  const { source } = context;\n  advancePos(context, source, numberOfCharacters);\n  context.source = source.slice(numberOfCharacters);\n}\n\nexport function advancePos(pos, source, numberOfCharacters = source.length) {\n  let linesCount = 0;\n  let lastNewLinePos = -1;\n  for (let i = 0; i < numberOfCharacters; i++) {\n    if (source.charCodeAt(i) === 10 /* newline char code */) {\n      linesCount++;\n      lastNewLinePos = i;\n    }\n  }\n  pos.offset += numberOfCharacters;\n  pos.line += linesCount;\n  pos.column =\n    lastNewLinePos === -1 ? pos.column + numberOfCharacters : numberOfCharacters - lastNewLinePos;\n\n  return pos;\n}\n\nfunction advancePosWithClone(pos: any, source: string, numberOfCharacters: number = source.length) {\n  return advancePos(extend({}, pos), source, numberOfCharacters);\n}\n\nfunction advanceSpaces(context: any): void {\n  const match = /^[\\t\\r\\n\\f ]+/.exec(context.source);\n  if (match) {\n    advanceBy(context, match[0].length);\n  }\n}\n\nfunction startsWith(source: string, searchString: string): boolean {\n  return source.startsWith(searchString);\n}\n\nfunction startsWithEndTagOpen(source: string, tag: string): boolean {\n  return (\n    startsWith(source, '</') &&\n    source.slice(2, 2 + tag.length).toLowerCase() === tag.toLowerCase() &&\n    /[\\t\\r\\n\\f />]/.test(source[2 + tag.length] || '>')\n  );\n}\n\nfunction last<T>(xs: T[]): T | undefined {\n  return xs[xs.length - 1];\n}\n\nfunction getPos(context) {\n  const { column, line, offset } = context;\n  return {\n    column,\n    line,\n    offset,\n  };\n}\n\nexport const enum NodeTypes {\n  ROOT,\n  ELEMENT,\n  TEXT,\n  COMMENT,\n  SIMPLE_EXPRESSION,\n  INTERPOLATION,\n  ATTRIBUTE,\n  DIRECTIVE,\n  COMPOUND_EXPRESSION,\n  COMPONENT,\n  SLOT,\n}\n\n// JavaScript 内置全局变量和关键字白名单\nconst jsGlobals = new Set([\n  // 原始值\n  'true',\n  'false',\n  'null',\n  'undefined',\n  'NaN',\n  'Infinity',\n\n  // 基本对象\n  'Object',\n  'Function',\n  'Boolean',\n  'Symbol',\n  'Error',\n  'EvalError',\n  'InternalError',\n  'RangeError',\n  'ReferenceError',\n  'SyntaxError',\n  'TypeError',\n  'URIError',\n\n  // 数字与数学\n  'Number',\n  'BigInt',\n  'Math',\n  'Date',\n\n  // 文本处理\n  'String',\n  'RegExp',\n\n  // Indexed collections\n  'Array',\n  'Int8Array',\n  'Uint8Array',\n  'Uint8ClampedArray',\n  'Int16Array',\n  'Uint16Array',\n  'Int32Array',\n  'Uint32Array',\n  'Float32Array',\n  'Float64Array',\n\n  // Keyed collections\n  'Map',\n  'Set',\n  'WeakMap',\n  'WeakSet',\n\n  // Structured data\n  'ArrayBuffer',\n  'SharedArrayBuffer',\n  'Atomics',\n  'DataView',\n  'JSON',\n\n  // Control abstraction objects\n  'Promise',\n  'Generator',\n  'GeneratorFunction',\n  'AsyncFunction',\n\n  // Reflection\n  'Reflect',\n  'Proxy',\n\n  // Web APIs & runtime globals\n  'window',\n  'globalThis',\n  'console',\n  'alert',\n  'setTimeout',\n  'setInterval',\n  'clearTimeout',\n  'clearInterval',\n  'requestAnimationFrame',\n  'cancelAnimationFrame',\n\n  // DOM\n  'document',\n  'location',\n  'history',\n  'navigator',\n\n  // 新语言关键字等\n  'await',\n  'async',\n  'arguments',\n  'this',\n]);\n\nfunction bindCtx(code: string): string {\n  return code.replace(/\\b([a-zA-Z_$][a-zA-Z0-9_$]*)\\b/g, (match, varName, offset, fullText) => {\n    // 1. 跳过字符串内的变量\n    const before = fullText.slice(0, offset);\n    const inSingleQuotes = /'[^']*$/.test(before) && /[^']*'/.test(fullText.slice(offset));\n    const inDoubleQuotes = /\"[^\"]*$/.test(before) && /[^\"]*\"/.test(fullText.slice(offset));\n    const inBacktick = /`[^`]*$/.test(before) && /[^`]*`/.test(fullText.slice(offset));\n    if (inSingleQuotes || inDoubleQuotes || inBacktick) return match;\n\n    // 2. 排除属性访问，例如 obj.key 中的 key\n    const prevChar = fullText[offset - 1];\n    if (prevChar === '.' || prevChar === ':') return match;\n\n    // 3. 排除全局作用域变量、JS 内置变量\n    if (hasScope(varName) || jsGlobals.has(varName)) return match;\n\n    // 4. 默认加 _ctx_\n    return `_ctx_.${varName}`;\n  });\n}\n\nfunction flattenArray(arr: any[]): any[] {\n  const result: any[] = [];\n\n  for (const item of arr) {\n    if (Array.isArray(item)) {\n      result.push(...flattenArray(item));\n    } else {\n      result.push(item);\n    }\n  }\n\n  return result;\n}\n\nfunction hasScope(name: string): boolean {\n  return flattenArray(scopeStack).includes(name);\n}\n","import { Namespaces, parse } from './parse';\nexport const NO = (tag: string) => false;\nexport function toAst(template: string) {\n  const context = createBaseContent(template);\n  return parse(context, [])[0];\n}\n\nfunction createBaseContent(content) {\n  return {\n    column: 1,\n    line: 1,\n    offset: 0,\n    originalSource: content,\n    source: content,\n    inPre: false,\n    inVPre: false,\n    options: {\n      delimiters: ['{{', '}}'],\n      isVoidTag: NO,\n      isPreTag: NO,\n      isCustomElement: NO,\n      getNamespace: (tag: string, parent: any) => Namespaces.HTML,\n    },\n  };\n}\n","export const nodeOps = {\n  insert: (child: Element, parent: Element, anchor: Element | null) => {\n    parent.insertBefore(child, anchor || null);\n  },\n\n  remove: (child: { parentNode: any }) => {\n    const parent = child.parentNode;\n    if (parent) {\n      parent.removeChild(child);\n    }\n  },\n  parentNode: (node: { parentNode: Element | null }) => node.parentNode as Element | null,\n};\n","export const isArray = (val) => val instanceof Array;\nexport const isString = (val: unknown): val is string => typeof val === 'string';\n\nexport const enum Namespaces {\n  HTML,\n}\n\nexport const NO = (tag: string) => false;\n\nexport function startsWith(source: string, searchString: string): boolean {\n  return source.startsWith(searchString);\n}\n\nexport function startsWithEndTagOpen(source: string, tag: string): boolean {\n  return (\n    startsWith(source, '</') &&\n    source.slice(2, 2 + tag.length).toLowerCase() === tag.toLowerCase() &&\n    /[\\t\\r\\n\\f />]/.test(source[2 + tag.length] || '>')\n  );\n}\n\nexport const isIntegerKey = (key: unknown) =>\n  isString(key) && key !== 'NaN' && key[0] !== '-' && '' + parseInt(key, 10) === key;\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nexport const hasOwn = (val: object, key: any): key is keyof typeof val =>\n  hasOwnProperty.call(val, key);\n\nexport const hasChanged = (value: any, oldValue: any): boolean => !Object.is(value, oldValue);\n\nexport function isDef(v: any) {\n  return v !== undefined && v !== null;\n}\n\nexport function isUndef(v: any) {\n  return v === undefined || v === null;\n}\n\nexport function escape2Html(str) {\n  const arrEntities = {\n    lt: '<',\n    gt: '>',\n    nbsp: ' ',\n    amp: '&',\n    quot: '\"',\n  };\n\n  return str\n    .replace(/&(lt|gt|nbsp|amp|quot);/gi, function (all: any, t: any) {\n      return arrEntities[t];\n    })\n    .replace(/<[^>]+s-on:([^>]+)>/gi, function (match: any, p1: any) {\n      return match.replace(/s-on:/g, '@');\n    });\n}\n\nexport const enum NodeTypes {\n  ROOT,\n  ELEMENT,\n  TEXT,\n  COMMENT,\n  SIMPLE_EXPRESSION,\n  INTERPOLATION,\n  ATTRIBUTE,\n  DIRECTIVE,\n  // containers\n  COMPOUND_EXPRESSION,\n  IF,\n  IF_BRANCH,\n  FOR,\n  TEXT_CALL,\n  // codegen\n  VNODE_CALL,\n}\n\nconst is = {\n  Array: Array.isArray,\n  Date: (val) => val instanceof Date,\n  Set: (val) => Object.prototype.toString.call(val) === '[object Set]',\n  Map: (val) => Object.prototype.toString.call(val) === '[object Map]',\n  Object: (val) => Object.prototype.toString.call(val) === '[object Object]',\n  Symbol: (val) => Object.prototype.toString.call(val) === '[object Symbol]',\n  Function: (val) => Object.prototype.toString.call(val) === '[object Function]',\n};\n\nexport function deepClone(value, weakMap = new WeakMap(), strict = false) {\n  // 2.1 函数浅拷贝\n  /* if (is.Function(value)) return value */\n\n  // 2.2 函数深拷贝\n  if (is.Function(value) && strict) {\n    if (/^function/.test(value.toString()) || /^\\(\\)/.test(value.toString())) {\n      return new Function('return ' + value.toString())();\n    }\n\n    return new Function('return function ' + value.toString())();\n  } else if (is.Function(value)) {\n    return value;\n  }\n\n  // 3.Date 深拷贝\n  if (is.Date(value)) return new Date(value.valueOf());\n\n  // 4.判断如果是Symbol的value, 那么创建一个新的Symbol\n  if (is.Symbol(value)) return Symbol(value.description);\n\n  // 5.判断是否是Set类型 进行深拷贝\n  if (is.Set(value)) {\n    // 5.1 浅拷贝 直接进行解构即可\n    // return new Set([...value])\n\n    // 5.2 深拷贝\n    const newSet = new Set();\n    for (const item of value) {\n      // @ts-expect-error\n      newSet.add(deepClone(item), weakMap);\n    }\n    return newSet;\n  }\n\n  // 6.判断是否是Map类型\n  if (is.Map(value)) {\n    // 6.1 浅拷贝 直接进行解构即可\n    // return new Map([...value])\n\n    // 6.2 深拷贝\n    const newMap = new Map();\n    for (const item of value) newMap.set(deepClone(item[0], weakMap), deepClone(item[1], weakMap));\n    return newMap;\n  }\n\n  // 9.判断weakMap是否有值 有值的情况下就直接将值返回就可以\n  if (weakMap.has(value)) return weakMap.get(value);\n\n  // 11.2 判断数组\n  if (is.Array(value)) {\n    const newArr = [];\n    // eslint-disable-next-line @typescript-eslint/no-for-in-array\n    for (const item in value) newArr[item] = deepClone(value[item], weakMap);\n    return newArr;\n  }\n\n  // 1.如果不是对象类型则直接将当前值返回\n  if (!is.Object(value)) return value;\n\n  // 7.判断传入的对象是数组, 还是对象\n  const newObj = is.Array(value) ? [] : {};\n\n  // 10.当weakMap没有值时，将originValue作为key, newObj作为value\n  weakMap.set(value, newObj);\n\n  for (const key in value) {\n    // 11.1 判断数组\n    if (is.Array(value[key])) deepClone(value[key], weakMap);\n\n    weakMap.set(value, newObj);\n    // 8 进行递归调用\n    newObj[key] = deepClone(value[key], weakMap);\n  }\n\n  // 4.1 对Symbol作为key进行特殊的处理 拿到对象上面的所有Symbol key，以数组形式返回\n  const symbolKeys = Object.getOwnPropertySymbols(value);\n  for (const sKey of symbolKeys) {\n    // 4.2 这里没有必要创建一个新的Symbol\n    // const newSKey = Symbol(sKey.description)\n\n    // 4.3 直接将原来的Symbol key 拷贝到新对象上就可以了\n    newObj[sKey] = deepClone(value[sKey], weakMap);\n  }\n\n  return newObj;\n}\n\nexport function guid(): string {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nexport function addCSS(cssText) {\n  const style = document.createElement('style'); // 创建一个style元素\n  const head = document.head || document.getElementsByTagName('head')[0]; // 获取head元素\n  style.type = 'text/css'; // 这里必须显示设置style元素的type属性为text/css，否则在ie中不起作用\n  // @ts-expect-error\n  if (style.styleSheet) {\n    // IE\n    const func = function () {\n      try {\n        // @ts-expect-error\n        style.styleSheet.cssText = cssText;\n      } catch (e) {}\n    };\n    // @ts-expect-error\n    if (style.styleSheet.disabled) {\n      setTimeout(func, 10);\n    } else {\n      func();\n    }\n  } else {\n    // w3c\n    // w3c浏览器中只要创建文本节点插入到style元素中就行了\n    const textNode = document.createTextNode(cssText);\n    style.appendChild(textNode);\n  }\n  head.appendChild(style); // 把创建的style元素插入到head中\n}\n\nexport * from './nodeOps';\n","import { NodeTypes } from './parse';\n\nexport function transform(context, helpers) {\n  function work(context) {\n    const props = context.props;\n    props?.forEach((prop) => {\n      if (prop.name === 's-if') {\n        helpers.sIf(context, prop);\n      }\n\n      if (prop.name === 's-for') {\n        helpers.sFor(context, prop);\n      }\n\n      if (prop.name === 's-html') {\n        helpers.sHtml(context, prop);\n      }\n\n      if (prop.name === 's-model') {\n        helpers.sModel(context, prop);\n      }\n\n      if (prop.name === 's-loading') {\n        helpers.sLoading(context, prop);\n      }\n\n      // if (prop.name === 'on') {\n      //   helpers.transformEvent(context, prop);\n      // }\n    });\n\n    if (context.tag === 'slot') {\n      context.type = NodeTypes.SLOT;\n    }\n\n    if (context.children) {\n      context.children.forEach((child) => {\n        work(child);\n      });\n    }\n  }\n\n  work(context);\n  return context;\n}\n","export function sIf(context, prop) {\n  context.if = {\n    value: prop.value.content,\n    type: prop.value.type,\n  };\n}\n","import { NodeTypes } from './parse';\nimport { isArray } from '@sugar/sugar-shared';\nimport { toAst } from './toAst';\nimport { transform } from './transform';\nimport { sIf } from './transform/sIf';\n\nlet key = 0;\n\nexport function generate(ast: any) {\n  const genElmChildren = (children = []) => {\n    let str = '[';\n    children.forEach((child: any, i) => {\n      if (\n        child.type === NodeTypes.ELEMENT ||\n        child.type === NodeTypes.INTERPOLATION ||\n        child.type === NodeTypes.SLOT\n      ) {\n        str += getElm(child) + `${i === children.length - 1 ? '' : ','}`;\n      } else if (child.type === NodeTypes.TEXT && !!child.content.trim()) {\n        str += getElm(child) + `${i === children.length - 1 ? '' : ','}`;\n      }\n    });\n    return str + ']';\n  };\n\n  function getElm(ast: any) {\n    let str = '';\n    const props = ast.props;\n    if (ast.type === 1 || ast.type === NodeTypes.SLOT) {\n      let elStr = '';\n      let ex = false;\n\n      elStr += `_ctx_._SUGAR._c('${ast.tag}',{ `;\n\n      elStr += '\"attrs\":{';\n\n      elStr += dealAttr(props);\n\n      elStr += '},\"on\":{';\n\n      elStr += dealEvent(props);\n\n      elStr += '}},';\n\n      if (ast.children) {\n        elStr += genElmChildren(ast.children);\n      } else {\n        elStr += '[]';\n      }\n\n      elStr += ')';\n\n      if (ast.forStatment) {\n        ex = true;\n        str += transformFor(ast);\n      }\n\n      if (ast.if && !ast.forStatment) {\n        ex = true;\n        str = `${ast.if.value} ? ${str + elStr} : _ctx_._SUGAR._e()`;\n      }\n\n      if (ast.loading && !ast.forStatment) {\n        ex = true;\n        const loadingRender = generate(\n          transform(\n            toAst(`<div class=\"s-loading\" s-if=\"${ast.loading.value}\">\n        <svg t=\"1734417183543\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4603\" width=\"30\" height=\"30\"><path d=\"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z\" p-id=\"4604\" fill=\"#8a8a8a\"></path></svg>\n        </div>`),\n            {\n              sIf,\n            },\n          ),\n        );\n        str = `_ctx_._SUGAR._c('div',{attrs:{style:'position:relative'},on:{}},[${\n          str + (!ast.if ? elStr : '')\n        },${loadingRender}])`;\n      }\n\n      if (ast.htmlStatment) {\n        ex = true;\n        str = `_ctx_._SUGAR._c('div',{attrs:{${dealAttr(props)}},on:{${dealEvent(props)}}},[_ctx_._SUGAR._html(${ast.htmlStatment.value.content})])`;\n      }\n\n      if (!ex) {\n        str += elStr;\n      }\n    } else if (ast.type === NodeTypes.INTERPOLATION) {\n      str += `_ctx_._SUGAR._v(_ctx_._SUGAR._s(${ast.content.content}))`;\n    } else if (ast.type === NodeTypes.TEXT) {\n      str += `_ctx_._SUGAR._v(decodeURIComponent(\"${encodeURIComponent(ast.content)}\"))`;\n    }\n\n    return str;\n  }\n\n  return getElm(ast);\n\n  function createElementString(tag: any, props: any, children: any) {\n    let element = `_ctx_._SUGAR._c('${tag}',{`;\n    element += '\"attrs\":{';\n    element += dealAttr(props);\n    element += '},\"on\":{';\n    element += dealEvent(props);\n    element += '}},[';\n\n    children.forEach((child: any, index: any) => {\n      element += generate(child);\n      if (index < children.length - 1) {\n        element += ',';\n      }\n    });\n\n    element += '])';\n\n    // Handle s-if and s-loading directives\n    props.forEach((prop: any) => {\n      if (prop.name === 's-if') {\n        element = `${prop.value.content} ? ${element} : _ctx_._SUGAR._e()`;\n      }\n\n      if (prop.name === 's-loading' && prop.value) {\n        const loadingRender = generate(\n          transform(\n            toAst(`<div class=\"s-loading\" s-if=\"${prop.value.content}\">\n          <svg t=\"1734417183543\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4603\" width=\"30\" height=\"30\"><path d=\"M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z\" p-id=\"4604\" fill=\"#8a8a8a\"></path></svg>\n        </div>`),\n            { sIf },\n          ),\n        );\n        element = `_ctx_._SUGAR._c('div',{attrs:{style:'position:relative'},on:{}},[${element},${loadingRender}])`;\n      }\n    });\n\n    return element;\n  }\n\n  function transformFor(ast: any) {\n    const forStatment = ast.forStatment;\n    const elementStr = createElementString(ast.tag, ast.props, ast.children);\n\n    return `..._ctx_._SUGAR._loop((${forStatment.item}${\n      forStatment.index ? ',' + forStatment.index : ''\n    })=>{\n      return ${elementStr}\n    },${forStatment.exp})`;\n  }\n}\n\nfunction dealAttr(props: any) {\n  let str = '';\n\n  props = props.filter((prop: any) => {\n    return (\n      prop.name !== 's-if' &&\n      prop.name !== 's-for' &&\n      prop.name !== 'on' &&\n      prop.name !== 's-loading' &&\n      prop.name !== 's-html'\n    );\n  });\n\n  props.forEach((prop: any, index: number) => {\n    if (\n      prop.name !== 's-if' &&\n      prop.name !== 's-for' &&\n      prop.name !== 'on' &&\n      prop.name !== 'bind' &&\n      prop.name !== 'slot' &&\n      prop.name !== 's-html'\n    ) {\n      str += `\"${prop.name}\":\"${prop.value.content}\"`;\n    } else if (prop.name === 'bind') {\n      str += `\"${prop.arg.content}\":${prop.exp.content}`;\n    } else if (prop.name === 'slot') {\n      str += `\"slot\":\"${prop.arg.content}\"`;\n    }\n\n    if (\n      prop.name !== 's-if' &&\n      prop.name !== 's-for' &&\n      prop.name !== 'on' &&\n      index < props.length - 1\n    ) {\n      str += ',';\n    }\n  });\n\n  return str;\n}\n\nfunction dealEvent(props: any) {\n  let str = '';\n\n  props = props.filter((prop: any) => {\n    return prop.name === 'on';\n  });\n\n  props.forEach((prop: any, index: number) => {\n    if (prop.name === 'on') {\n      let funString = `${prop.exp.content}`;\n      if (prop.exp.isStatic) {\n        funString = `(e)=>{${prop.exp.content}}`;\n      }\n      str += `\"${prop.arg.content}\":{\"value\":${funString},\"isStatic\":${prop.exp.isStatic},\"modifiers\":[${Array2String(prop.modifiers)}]}`;\n\n      if (prop.name === 'on' && index < props.length - 1) {\n        str += ',';\n      }\n    }\n  });\n\n  return str;\n}\n\nfunction Array2String(arr: any) {\n  if (!isArray(arr)) {\n    return '';\n  }\n  return arr.map((a: any) => {\n    return `\"${a}\"`;\n  });\n}\n","import { isArray } from '@sugar/sugar-shared';\n\nexport function sFor(context, prop) {\n  const forMatch = prop.value.content.split(' in ');\n  const reg = /(?<=\\()(.+?)(?=\\))/;\n  forMatch[0] = forMatch[0].match(reg) ? forMatch[0].match(reg)[0].split(',') : forMatch[0];\n\n  context.forStatment = {\n    exp: forMatch[1],\n    item: isArray(forMatch[0]) ? forMatch[0][0] : forMatch[0],\n    index: isArray(forMatch[0]) ? forMatch[0][1] : null,\n  };\n}\n","export function sHtml(context, prop) {\n  context.htmlStatment = {\n    value: prop.value,\n  };\n}\n","export function sLoading(context, prop) {\n  context.loading = {\n    value: prop.value.content,\n    type: prop.value.type,\n  };\n}\n","export function transformEvent(content, prop) {\n  if (prop.exp.content.includes('(') && prop.exp.content.includes(')')) {\n    const eventStr = prop.exp.content;\n    prop.exp.content = prop.exp.content.substring(0, eventStr.indexOf('('));\n    prop.exp.parameters = eventStr\n      .substring(eventStr.indexOf('(') + 1, eventStr.length - 1)\n      .split(',');\n  }\n}\n","export function sModel(context, prop) {\n  context.props.push({\n    type: 7,\n    name: 'on',\n    exp: {\n      type: 4,\n      content: `_ctx_.${prop.value.content} = e.target.value`,\n      isStatic: true,\n    },\n    arg: {\n      type: 4,\n      content: 'input',\n    },\n    modifiers: [],\n  });\n  context.props.push({\n    type: 7,\n    name: 'bind',\n    exp: {\n      type: 4,\n      content: `_ctx_.${prop.value.content}`,\n    },\n    arg: {\n      type: 4,\n      content: 'value',\n    },\n    modifiers: [],\n  });\n}\n","import { toAst } from './toAst';\nimport { generate } from './codegen';\nimport { transform } from './transform';\nimport { sIf } from './transform/sIf';\nimport { sFor } from './transform/sFor';\nimport { sHtml } from './transform/sHtml';\nimport { sLoading } from './transform/sLoading';\nimport { transformEvent } from './transform/transformEvent';\nimport { sModel } from './transform/sModel';\n\nexport function baseCompile(template: string) {\n  const ast = toAst(template);\n  transform(ast, {\n    sIf,\n    sFor,\n    sHtml,\n    sLoading,\n    transformEvent,\n    sModel,\n  });\n\n  return {\n    root: ast,\n    code: generate(ast),\n  };\n}\n","import { baseCompile } from './compile';\n\nexport function sugarCompiler(template: string) {\n  function compile(template = '') {\n    const { code, root } = baseCompile(template);\n    return {\n      code: createFunction(code),\n      root,\n    };\n  }\n\n  function createFunction(code = '') {\n    return new Function(`    const _ctx_ = this;\n    const proxy = new Proxy({}, {\n      get(target, prop, receiver) {\n        if (prop in ctx) {\n          return ctx[prop];\n        }\n        throw new ReferenceError(\\`Missing variable \\${String(prop)} in template\\`);\n      }\n    });\n    return ${code.toString()};\n  `);\n  }\n\n  return compile(template);\n}\n","export function isComponent(vnode: any, components: any) {\n  return !!components[vnode.tag] || vnode.tag === 'component';\n}\n","export const componentCache: any = {};\nexport function addComponentCache(sugar: any, key: any) {\n  componentCache[key] = sugar;\n}\nexport function getComponentCache(key: string) {\n  return componentCache[key];\n}\n","const callbacks = [];\nlet pending = false;\n\nfunction flushCallbacks() {\n  pending = false;\n  const copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (let i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\nexport async function nextTick(cb: Function) {\n  let _resolve;\n  callbacks.push(() => {\n    if (cb) {\n      cb();\n    } else if (_resolve) {\n      _resolve();\n    }\n  });\n  if (!pending) {\n    pending = true;\n    void Promise.resolve().then(flushCallbacks);\n  }\n\n  if (!cb) {\n    return await new Promise((resolve, reject) => {\n      // 保存resolve到callbacks数组中\n      _resolve = resolve;\n    });\n  }\n}\n","const jobQueue = new Set<() => void>();\nlet isFlushing = false;\n\nexport function queueJob(job: () => void) {\n  jobQueue.add(job);\n  if (!isFlushing) {\n    isFlushing = true;\n    void Promise.resolve().then(() => {\n      for (const job of jobQueue) job();\n      jobQueue.clear();\n      isFlushing = false;\n    });\n  }\n}\n","// dep.ts（依赖收集器）\nimport { queueJob } from './scheduler';\n\ntype EffectFn = () => void;\n\nconst targetMap = new WeakMap<object, Map<string | symbol, Set<EffectFn>>>();\nlet activeEffect: EffectFn | null = null;\n\nexport function effect(fn: EffectFn) {\n  const wrapper = () => {\n    activeEffect = wrapper;\n    fn();\n    activeEffect = null;\n  };\n  wrapper();\n  return wrapper;\n}\n\nexport function track(target: object, key: string | symbol) {\n  if (!activeEffect) return;\n  let depsMap = targetMap.get(target);\n  if (!depsMap) {\n    depsMap = new Map();\n    targetMap.set(target, depsMap);\n  }\n\n  let deps = depsMap.get(key);\n  if (!deps) {\n    deps = new Set();\n    depsMap.set(key, deps);\n  }\n\n  deps.add(activeEffect);\n}\n\nexport function trigger(target: object, key: string | symbol) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) return;\n\n  const effects = depsMap.get(key);\n  if (!effects) return;\n\n  for (const effect of effects) {\n    queueJob(effect); // 全局调度\n  }\n}\n\n// watch 实现\nfunction watch(source: any, cb: Function) {\n  // 定义一个内部副作用函数，读取source触发依赖收集\n  let getter: any;\n\n  if (typeof source === 'function') {\n    getter = source;\n  } else if (isRef(source)) {\n    getter = () => source.value;\n  } else {\n    // 支持 reactive 对象\n    getter = () => traverse(source);\n  }\n\n  let oldValue: any;\n\n  // 定义副作用函数，触发getter获取值，执行回调\n  function onEffect() {\n    const newValue = getter();\n    cb(newValue, oldValue);\n    oldValue = newValue;\n  }\n\n  // 注册副作用函数，响应式数据变化时触发\n  effect(onEffect);\n}\n\nfunction isRef(r: any) {\n  return r && typeof r === 'object' && r.__isRef;\n}\n\nfunction traverse(value: any, seen = new Set()) {\n  if (typeof value !== 'object' || value === null || seen.has(value)) return;\n\n  seen.add(value);\n\n  if (isRef(value)) {\n    // 👇 递归访问 ref 的 .value\n    traverse(value.value, seen);\n  } else {\n    for (const key in value) {\n      traverse(value[key], seen);\n    }\n  }\n\n  return value;\n}\n\nexport { watch };\n","// ref.ts\nimport { track, trigger } from './dep';\n\nexport function ref<T>(rawValue: T) {\n  let value = rawValue;\n\n  return {\n    get value() {\n      track(this, 'value');\n      return value;\n    },\n    set value(newVal) {\n      if (newVal !== value) {\n        value = newVal;\n        trigger(this, 'value');\n      }\n    },\n    __isRef: true,\n  };\n}\n","// reactive.ts\nimport { track, trigger } from './dep';\n\nexport function reactive<T extends object>(target: T): T {\n  return new Proxy(target, {\n    get(obj, key, receiver) {\n      const res = Reflect.get(obj, key, receiver);\n      track(obj, key);\n      return typeof res === 'object' && res !== null ? reactive(res) : res;\n    },\n    set(obj: { [key: string | symbol]: any }, key, value, receiver) {\n      const oldVal = obj[key];\n      const res = Reflect.set(obj, key, value, receiver);\n      if (oldVal !== value) {\n        trigger(obj, key);\n      }\n      return res;\n    },\n  });\n}\n","// 运行时模拟 defineProps (仅演示)\nexport function defineProps<T extends Record<string, any>>(options?: T): T {\n  // 编译时会替换成 props 参数\n  // 这里简化为直接返回传入定义，模拟 props 数据\n  return options || ({} as T);\n}\n","import { deepClone, guid, isArray } from '@sugar/sugar-shared';\nimport { mountHandleList, updateActiveId } from '@sugar/sugar-hook';\nimport { bindT, VmDataRefPassive } from './index';\nimport { sugarCompiler } from '@sugar/sugar-compiler';\nimport patch from './patch';\nimport { addComponentCache, getComponentCache } from './componentCache';\nimport { effect, reactive } from '@sugar/sugar-reactive';\n\nexport function bulkComponent(_vnode: any, parentComponent: any) {\n  const {\n    data: { attrs, on },\n    children,\n  }: any = _vnode;\n\n  const _sugar: any = deepClone(parentComponent);\n  const props: any = reactive({});\n  const slot = children;\n  Object.keys(attrs).forEach((propName) => {\n    if (propName !== 'ref') {\n      props[propName] = attrs[propName];\n    }\n  });\n  Object.keys(on).forEach((propName) => {\n    if (on[propName].parameters) {\n      props[propName] = function () {\n        on[propName].value(...on[propName].parameters);\n      };\n    } else {\n      props[propName] = on[propName].value;\n    }\n  });\n  if (_vnode.key && getComponentCache(_vnode.key)) {\n    return getComponentCache(_vnode.key);\n  }\n  const app = makeComponent({\n    ..._sugar,\n    props,\n    slot,\n  });\n  app.mount();\n  _vnode.key && addComponentCache(app, _vnode.key);\n  return app;\n}\n\nexport function makeComponent(instance: any) {\n  const appId = guid();\n  updateActiveId(appId);\n  const data = instance.bulk(instance.props);\n  const { mounted, update } = componentRender();\n  const $: any = {};\n  const vm = {\n    render: instance.render,\n    _vnode: null,\n    data,\n    $el: null as any,\n    appId,\n    components: instance.components ? instance.components : [],\n    sugar: {},\n    slot: instance.slot,\n    props: instance.props,\n    headTag: instance.headTag || 'div',\n    use,\n    parent: instance.parent,\n  };\n\n  if (isArray(vm.components)) {\n    vm.components = vm.components.reduce((acc, cur) => {\n      acc[cur.name] = cur;\n      return acc;\n    }, {});\n  }\n\n  Object.values(data).forEach((d: any) => {\n    if (d.headTag && d.render && d.name && d.bulk) {\n      use(d);\n    }\n  });\n\n  function mount() {\n    mounted(vm, data);\n    mountHandleList[appId]?.forEach((item: any) => {\n      item.fun();\n      item.used = true;\n    });\n\n    effect(() => {\n      update(vm);\n    });\n  }\n\n  function forceUpdate() {\n    update(vm);\n  }\n\n  function updateSlot(slot: any) {\n    vm.slot = slot;\n    update(vm);\n  }\n\n  function use(components: any) {\n    if (!isArray(components)) {\n      components = [components];\n    }\n    components.forEach((component: any) => {\n      if (component.name) {\n        vm.components[component.name] = component;\n        vm.components[component.name].components = vm.components;\n      } else if (component.fun) {\n        $[component.fun] = component.bulk;\n      }\n    });\n  }\n\n  return {\n    vm,\n    mount,\n    ...data,\n    updateSlot,\n    forceUpdate,\n    use,\n    $,\n  };\n}\n\nexport function componentRender() {\n  let render: any = null;\n\n  function mounted(vm: any, data: any) {\n    vm.$el = document.createElement(vm.headTag);\n    vm._vnode = vm.$el;\n    render = vm.render;\n    bindT(vm, data);\n    vm.forceUpdate = function () {\n      update(vm);\n    };\n  }\n\n  function update(vm: any) {\n    const vmFiber: any = VmDataRefPassive(vm);\n    const vnode = render.call(VmDataRefPassive(vm));\n    vm.slot.length && assembling(vnode, vm.slot);\n    patch(vmFiber, vnode);\n    vmFiber._vnode = vnode;\n  }\n\n  function assembling(_n: any, slot: any) {\n    for (let i = 0; i < _n.children.length; i++) {\n      const child = _n.children[i];\n      if (child.tag === 'slot' && isDefault(slot) && child.data.attrs?.name === 'default') {\n        _n.children.splice(0, 1, ...slot);\n      } else if (child.tag === 'slot' && child.data.attrs?.name) {\n        const NamedSlot = slot.find((s: any) => {\n          return s.data?.attrs.slot === child.data.attrs.name;\n        });\n        updateSlot(child, NamedSlot, _n.children);\n      } else if (child.children?.length) {\n        assembling(child, slot);\n      }\n    }\n  }\n\n  function isDefault(slot: any) {\n    return !slot.find((s: any) => {\n      return !!s.data?.attrs.slot;\n    });\n  }\n\n  function updateSlot(oldSlot: any, newSlot: any, parent: any[]) {\n    if (!newSlot) {\n      parent.splice(parent.indexOf(oldSlot), 1, []);\n      return;\n    }\n    parent.splice(parent.indexOf(oldSlot), 1, ...newSlot.children);\n  }\n\n  return {\n    update,\n    mounted,\n  };\n}\n\nexport function Component(options: any) {\n  const { code, root } = sugarCompiler(options.render);\n  return {\n    ...options,\n    render: code,\n    headTag: root.tag,\n  };\n}\n","import { isDef, isUndef, nodeOps } from '@sugar/sugar-shared';\nimport { isComponent } from './utils';\nimport { bulkComponent } from './component';\n\nexport default function patch(vm: any, newVnode: any) {\n  let oldVnode = vm._vnode;\n  if (!oldVnode.elm) {\n    oldVnode = emptyNodeAt(oldVnode);\n  }\n  if (isSameNode(oldVnode, newVnode)) {\n    patchVnode(newVnode, oldVnode);\n  } else {\n    if (oldVnode.elm?.parentNode && newVnode) {\n      nodeOps.insert(\n        createElement(newVnode),\n        <Element>nodeOps.parentNode(oldVnode.elm),\n        oldVnode.elm,\n      );\n      nodeOps.remove(oldVnode.elm);\n    } else {\n      patchVnode(newVnode, oldVnode);\n    }\n  }\n\n  function createElement(vnode: any) {\n    let domNode;\n    if (vnode.tag) {\n      if (typeof vnode.tag === 'string' && !isComponent(vnode, vm.components)) {\n        if (vnode.tag === 'component' && vnode.data.attrs.is) {\n          const app = bulkComponent(vnode, vnode.data.attrs.is);\n          vnode.elm = app.vm.$el;\n          vnode._sugar = app;\n          domNode = vnode.elm;\n          if (vnode.data.attrs.ref && vnode.data.attrs.ref in vm) {\n            vm[vnode.data.attrs.ref] = app;\n          }\n        } else if (vnode.tag === 'svg' || vnode.tag === 'path') {\n          domNode = document.createElementNS('http://www.w3.org/2000/svg', vnode.tag);\n        } else {\n          domNode = document.createElement(vnode.tag);\n        }\n\n        const { data = {} } = vnode || {};\n\n        const { attrs = {}, on = {} } = data;\n        // 处理属性\n        for (const key in attrs) {\n          if (Object.hasOwnProperty.call(attrs, key)) {\n            const value = attrs[key];\n            domNode.setAttribute(key, value);\n            if (key === 'ref' && value in vm) {\n              vm[value] = domNode;\n            }\n          }\n        }\n        const _vei = domNode._vei || (domNode._vei = {});\n        // 处理监听事件\n        for (const key in on) {\n          if (Object.hasOwnProperty.call(on, key)) {\n            if (on[key].value) {\n              const event = (e: Event) => {\n                on[key].value(e);\n                if (on[key].modifiers.includes('stop')) {\n                  e.stopPropagation();\n                }\n                if (on[key].modifiers.includes('prevent')) {\n                  e.preventDefault();\n                }\n              };\n              domNode.addEventListener(key, event);\n              _vei[key] = event;\n            }\n          }\n        }\n        if (vnode.children) {\n          for (let i = 0; i < vnode.children.length; i++) {\n            const childrenDom = createElement(vnode.children[i]);\n            if (childrenDom) {\n              domNode.append(childrenDom);\n            }\n          }\n        }\n      } else if (isComponent(vnode, vm.components)) {\n        const app = bulkComponent(vnode, vm.components[getComponentName(vnode, vm)]);\n        vnode.elm = app.vm.$el;\n        vnode._sugar = app;\n        domNode = vnode.elm;\n        if (vnode.data.attrs.ref && vnode.data.attrs.ref in vm) {\n          vm[vnode.data.attrs.ref] = app;\n        }\n      }\n    } else if (vnode.text !== undefined) {\n      domNode = document.createTextNode(vnode.text);\n    } else if (vnode.elm !== undefined) {\n      domNode = vnode.elm;\n    }\n    vnode.elm = domNode;\n    return domNode;\n  }\n\n  function getComponentName(vnode: any, vm: any) {\n    if (vnode.tag === 'component') {\n      vm.use(vnode.data.attrs.is);\n      return vnode.data.attrs.is.name;\n    } else {\n      return vnode.tag;\n    }\n  }\n\n  function patchVnode(newVnode: any, oldVnode: any) {\n    if (isComponent(newVnode, vm.components)) {\n      if (!oldVnode._sugar) {\n        const node = createElement(newVnode);\n        nodeOps.insert(node, <Element>nodeOps.parentNode(oldVnode.elm), oldVnode.elm);\n        oldVnode.elm.remove();\n        oldVnode.elm = node;\n      } else {\n        updateComponent(newVnode, oldVnode);\n        bindComponentInstance(newVnode, vm);\n      }\n      return;\n    }\n    newVnode.elm = oldVnode.elm;\n    if (newVnode.text !== undefined) {\n      if (oldVnode.text !== newVnode.text) {\n        oldVnode.elm.nodeValue = newVnode.text;\n      }\n    } else if (newVnode.tag) {\n      patchProps(newVnode, oldVnode, vm);\n      if (oldVnode.children?.length) {\n        updateChildren(oldVnode.elm, oldVnode.children, newVnode.children);\n      } else if (newVnode.children.length > 0) {\n        oldVnode.elm.innerHTML = '';\n        for (let i = 0; i < newVnode.children.length; i++) {\n          const child = createElement(newVnode.children[i]);\n          if (child) {\n            oldVnode.elm.appendChild(child);\n          }\n        }\n      }\n    }\n  }\n\n  function patchProps(newVnode: any, oldVnode: any, vm: any) {\n    const attrs = newVnode.data.attrs;\n    const on = newVnode.data.on;\n    const oldAttrs = oldVnode.data.attrs;\n    const elm = newVnode.elm;\n    patchAttrs(elm, oldAttrs, attrs, vm);\n    patchEvents(elm, on);\n  }\n\n  function patchAttrs(el: any, oldAttrs: any, newAttrs: any, vm: any) {\n    if (oldAttrs) {\n      Object.keys(oldAttrs).forEach((attr) => {\n        if (newAttrs[attr] !== oldAttrs[attr]) {\n          el.removeAttribute(attr);\n        }\n      });\n    }\n\n    Object.keys(newAttrs).forEach((attr) => {\n      if (attr === 'value') {\n        el.value = newAttrs[attr];\n      }\n      if (!oldAttrs || newAttrs[attr] !== oldAttrs[attr]) {\n        el.setAttribute(attr, newAttrs[attr]);\n      }\n\n      if (attr === 'ref' && newAttrs[attr] in vm) {\n        vm[newAttrs[attr]] = el;\n      }\n    });\n  }\n\n  function updateChildren(parentDom: any, oldCh: any, newCh: any) {\n    oldCh = clearEmptyVnode(oldCh);\n    newCh = clearEmptyVnode(newCh);\n\n    // 旧前\n    let oldPreIndex = 0;\n    // 旧后\n    let oldAftIndex = oldCh.length - 1;\n    // 新前\n    let newPreIndex = 0;\n    // 新后\n    let newAftIndex = newCh.length - 1;\n    // 旧前节点\n    let oldSNode = oldCh[oldPreIndex];\n    // 旧后节点\n    let oldENode = oldCh[oldAftIndex];\n    // 新前节点\n    let newSNode = newCh[newPreIndex];\n    // 新后节点\n    let newENode = newCh[newAftIndex];\n\n    let oldKeyToIdx, idxInOld, elmToMove, refElm;\n\n    while (oldPreIndex <= oldAftIndex && newPreIndex <= newAftIndex) {\n      if (!oldSNode || !oldCh[oldPreIndex]) {\n        oldSNode = oldCh[++oldPreIndex];\n      } else if (!oldENode || !oldCh[oldAftIndex]) {\n        oldENode = oldCh[--oldAftIndex];\n      } else if (!newSNode || !newCh[newPreIndex]) {\n        newSNode = newCh[++newPreIndex];\n      } else if (!newENode || !newCh[newAftIndex]) {\n        newENode = newCh[--newAftIndex];\n      } else if (isSameNode(newSNode, oldSNode)) {\n        patchVnode(newSNode, oldSNode);\n        oldSNode = oldCh[++oldPreIndex];\n        newSNode = newCh[++newPreIndex];\n        // 新前与旧后\n      } else if (isSameNode(newSNode, oldENode)) {\n        patchVnode(newSNode, oldENode);\n        parentDom.insertBefore(oldENode.elm, oldSNode.elm);\n        oldENode = oldCh[--oldAftIndex];\n        newSNode = newCh[++newPreIndex];\n        // 新后与旧前\n      } else if (isSameNode(newENode, oldSNode)) {\n        patchVnode(newENode, oldSNode);\n        parentDom.insertBefore(oldSNode.elm, oldENode.elm.nextSibling);\n        oldSNode = oldCh[++oldPreIndex];\n        newENode = newCh[--newAftIndex];\n        // 新后与旧后\n      } else if (isSameNode(newENode, oldENode)) {\n        patchVnode(newENode, oldENode);\n        oldENode = oldCh[--oldAftIndex];\n        newENode = newCh[--newAftIndex];\n      } else {\n        if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldPreIndex, oldAftIndex);\n        idxInOld = isDef(newSNode.key) ? oldKeyToIdx[newSNode.key] : null;\n        if (isUndef(idxInOld)) {\n          parentDom.insertBefore(createElement(newSNode), oldSNode.elm);\n          newSNode = newCh[++newPreIndex];\n        } else {\n          elmToMove = oldCh[idxInOld];\n          if (isSameNode(elmToMove, newSNode)) {\n            patchVnode(newSNode, elmToMove);\n            oldCh[idxInOld] = undefined;\n            parentDom.insertBefore(elmToMove.elm, oldSNode.elm);\n          } else {\n            parentDom.insertBefore(createElement(newSNode), oldSNode.elm);\n          }\n\n          newSNode = newCh[++newPreIndex];\n        }\n      }\n    }\n\n    if (oldPreIndex > oldAftIndex) {\n      refElm = isUndef(newCh[newAftIndex + 1]) ? null : newCh[newAftIndex + 1].elm;\n      for (; newPreIndex <= newAftIndex; newPreIndex++) {\n        if (refElm) {\n          parentDom.insertBefore(createElement(newCh[newPreIndex]), refElm);\n        } else {\n          parentDom.append(createElement(newCh[newPreIndex]));\n        }\n      }\n    }\n\n    if (newPreIndex > newAftIndex) {\n      for (let i = oldPreIndex; i <= oldAftIndex; i++) {\n        if (oldCh[i]?.elm) {\n          parentDom.removeChild(oldCh[i].elm);\n        }\n      }\n    }\n  }\n\n  function createKeyToOldIdx(children: any, beginIdx: any, endIdx: any) {\n    let i, key;\n    const map: any = {};\n    for (i = beginIdx; i <= endIdx; ++i) {\n      key = children[i].key;\n      if (isDef(key)) map[key] = i;\n    }\n    return map;\n  }\n}\n\nexport function updateComponent(newVnode: any, oldVnode: any) {\n  Object.keys(oldVnode._sugar.vm.props).forEach((prop) => {\n    const { attrs, on } = newVnode.data;\n    if (Object.keys(attrs).includes(prop)) {\n      oldVnode._sugar.vm.props[prop] = newVnode.data.attrs[prop];\n    } else if (Object.keys(on).includes(prop)) {\n      if (newVnode.data.on[prop].parameters) {\n        oldVnode._sugar.vm.props[prop] = function () {\n          newVnode.data.on[prop].value(...newVnode.data.on[prop].parameters);\n        };\n      } else {\n        oldVnode._sugar.vm.props[prop] = newVnode.data.on[prop].value;\n      }\n    }\n  });\n  oldVnode._sugar.updateSlot(newVnode.children);\n  newVnode.elm = oldVnode.elm;\n  newVnode._sugar = oldVnode._sugar;\n}\n\nexport function emptyNodeAt(elm: any) {\n  return new VNode(elm.tagName.toLowerCase(), {}, [], elm);\n}\n\nfunction isSameNode(o: any, n: any) {\n  return o.key === n.key && o.tag === n.tag;\n}\n\nfunction patchEvents(el: any, newOn: any) {\n  const _vei = el._vei || (el._vei = {});\n  Object.keys(_vei).forEach((eventName) => {\n    el.removeEventListener(eventName, _vei[eventName]);\n  });\n  Object.keys(newOn).forEach((eventName) => {\n    _vei[eventName] = (e: Event) => {\n      if (newOn[eventName].modifiers.includes('stop')) {\n        e.stopPropagation();\n      }\n      if (newOn[eventName].modifiers.includes('prevent')) {\n        e.preventDefault();\n      }\n      newOn[eventName].value(e);\n    };\n    el.addEventListener(eventName, _vei[eventName]);\n  });\n}\n\nfunction clearEmptyVnode(Vnodes: any) {\n  return Vnodes.filter((Vnode: any) => {\n    return Vnode.tag || Vnode.text === '' || Vnode.text || Vnode.elm;\n  });\n}\n\nfunction bindComponentInstance(vNode: any, vm: any) {\n  const data = vNode.data;\n  if (data) {\n    const attrs = data.attrs;\n    if (attrs.ref && vm[attrs.ref] in vm) {\n      vm[attrs.ref] = vNode.elm;\n    }\n  }\n  if (vNode.children) {\n    vNode.children.forEach((child: any) => {\n      bindComponentInstance(child, vm);\n    });\n  }\n}\n\nclass VNode {\n  private readonly tag: any;\n  private readonly data: any;\n  private readonly elm: undefined;\n  private readonly context: undefined;\n  private readonly text: undefined;\n  private readonly key: undefined;\n  private readonly _sugar: undefined;\n\n  constructor(tag?: any, data?: any, children?: any, elm?: any) {\n    this.tag = tag;\n    this.data = data;\n    // @ts-expect-error\n    this.children = children;\n    this.key = data.attrs?.key;\n    this.elm = elm;\n    this.context = undefined;\n    this.text = undefined;\n  }\n}\n","import { sugarCompiler } from '@sugar/sugar-compiler';\nimport patch from './patch';\nimport { escape2Html } from '@sugar/sugar-shared';\n\nimport { Component } from './component';\nimport { effect } from '@sugar/sugar-reactive';\n\nexport { Component };\n\nexport function sugarRender() {\n  let render: Function | null = null;\n\n  function mounted<T>(vm: any, data: T) {\n    const serializer = new XMLSerializer();\n    if (!vm.render) {\n      const htmlCode = vm.render ? vm.render : escape2Html(serializer.serializeToString(vm.$el));\n      const { code } = sugarCompiler(htmlCode);\n      render = code;\n    } else {\n      render = vm.render;\n    }\n    bindT(vm, data);\n    effect(() => {\n      update(vm);\n    });\n  }\n\n  function update(vm: any) {\n    const vmFiber: any = VmDataRefPassive(vm);\n    const vnode = render?.call(vmFiber);\n    patch(vmFiber, vnode);\n    vmFiber._vnode = vnode;\n  }\n\n  return {\n    update,\n    mounted,\n  };\n}\n\nexport function VmDataRefPassive(vm: any) {\n  return new Proxy(vm, {\n    get(target, prop, receiver) {\n      const val = Reflect.get(target, prop, receiver);\n      if (isRef(val)) {\n        return val.value;\n      } else {\n        return val;\n      }\n    },\n    set(target, prop, newValue, receiver) {\n      const val = Reflect.get(target, prop, receiver);\n      if (isRef(val)) {\n        val.value = newValue;\n      } else {\n        Reflect.set(target, prop, newValue);\n      }\n      return true;\n    },\n  });\n}\n\nfunction isRef(value: any) {\n  return !!value?.__isRef;\n}\n\nexport function bindT(vm: any, data: any) {\n  Object.keys(data).forEach((key) => {\n    vm[key] = data[key];\n  });\n\n  function _c(tag = 'div', data = {}, children = []) {\n    return createElement(tag, data, children);\n  }\n\n  function _v(str: string) {\n    const vnode: any = new VNode();\n    vnode.text = str;\n    return vnode;\n  }\n\n  function _s(val: string) {\n    return String(val);\n  }\n\n  function _e() {\n    return {\n      tag: 'div',\n      data: {\n        attrs: {\n          class: 's-block',\n        },\n        on: {},\n      },\n      children: [],\n      elm: {\n        _vei: {},\n      },\n    };\n  }\n\n  function _html(html: string) {\n    return html2Vnode(html);\n  }\n\n  function _loop(fun: Function, data: any) {\n    const nodes: any[] = [];\n    data.forEach((item: any, index: number) => {\n      nodes.push({\n        ...fun(item, index),\n      });\n    });\n    return nodes;\n  }\n\n  vm._SUGAR = {\n    _c,\n    _v,\n    _s,\n    _e,\n    _loop,\n    _html,\n  };\n}\n\nexport function createElement(tag = 'div', data = {}, children = []) {\n  const createVNode = (tag = 'div', data = {}, children = []) => {\n    const vnodeChildren: any[] = [];\n\n    if (children && children.length > 0) {\n      children.forEach((child) => {\n        vnodeChildren.push(child);\n      });\n    }\n    return new VNode(tag, data, vnodeChildren);\n  };\n\n  // render函数中执行_c，接收参数，创建vnode\n  return createVNode(tag, data, children);\n}\n\nexport class VNode {\n  private readonly tag: any;\n  private readonly data: any;\n  private readonly elm: undefined;\n  private readonly context: undefined;\n  private readonly text: undefined;\n  private readonly key: undefined;\n  private readonly sugar: any;\n\n  constructor(\n    tag?: string | undefined,\n    data?: { attrs?: any } | undefined,\n    children?: any[] | undefined,\n  ) {\n    this.tag = tag;\n    this.data = data;\n    // @ts-expect-error\n    this.children = children;\n    this.elm = undefined;\n    this.context = undefined;\n    this.text = undefined;\n    this.key = data?.attrs?.key;\n  }\n}\n\nexport function html2Vnode(html: string) {\n  function work(dom: any) {\n    const attr = {\n      attrs: {} as any,\n      on: {},\n    };\n    Array.from(dom.attributes).forEach((item: any) => {\n      attr.attrs[item.name] = item.value;\n    });\n    const vNode: any = createElement(dom.tagName, attr, []);\n    Array.from(dom.childNodes).forEach((child: any) => {\n      if (child.nodeType === 1) {\n        vNode.children.push(work(child));\n      } else if (child.nodeType === 3) {\n        vNode.children.push({\n          tag: '',\n          content: child.textContent,\n          children: [],\n          elm: undefined,\n          text: child.textContent,\n          key: undefined,\n          data: undefined,\n        });\n      }\n    });\n    return vNode;\n  }\n\n  const div = document.createElement('div');\n  div.innerHTML = html;\n  return work(div);\n}\n","import { addCSS } from '@sugar/sugar-shared';\n\nexport function initCSS() {\n  addCSS(`\n      .s-block{\n        display:none;\n      }\n  \n      .s-loading{\n        position: absolute;\n        background: rgba(255,255,255,0.8);\n        z-index: 99999;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      \n      .s-loading svg{\n        animation: sLoading 1s linear infinite;\n      }\n  \n      @keyframes sLoading {\n        from {\n          transform: rotate(0deg);\n        }\n        to {\n          transform: rotate(360deg);\n        }\n      }\n  \n  `);\n}\n","import { type Core } from './types';\nimport { onMounted, mountHandleList, updateActiveId } from '@sugar/sugar-hook';\nimport { sugarRender } from '@sugar/sugar-render';\nimport { guid, isArray } from '@sugar/sugar-shared';\nimport { nextTick } from '@sugar/sugar-reactive';\nimport { initCSS } from './utils/utils';\n\nfunction createApp(options: Core) {\n  const appId = guid();\n  updateActiveId(appId);\n  const data = options.bulk(options.props);\n  const $: any = {};\n  const { mounted } = sugarRender();\n  const vm = {\n    render: options.render,\n    _vnode: null,\n    data,\n    $el: null as any,\n    appId,\n    components: (options.components || []) as any,\n    sugar: {},\n    slot: options.slot,\n    forceUpdate: () => {},\n    use,\n  };\n\n  if (isArray(vm.components)) {\n    vm.components = vm.components.reduce((acc, cur) => {\n      acc[cur.name] = cur;\n      return acc;\n    }, {});\n  }\n\n  function mount(el: string | HTMLElement) {\n    initCSS();\n    vm._vnode = vm.$el = typeof el === 'string' ? document.querySelector(`${el}`) : el;\n    mounted(vm, data);\n    void nextTick(() => {\n      mountHandleList[appId]?.forEach((item: any) => {\n        item.fun();\n        item.used = true;\n      });\n    });\n  }\n\n  function use(components: any) {\n    if (!isArray(components)) {\n      components = [components];\n    }\n    components.forEach((component: any) => {\n      if (component.name) {\n        vm.components[component.name] = component;\n        vm.components[component.name].components = vm.components;\n      } else if (component.fun) {\n        $[component.fun] = component.bulk;\n      }\n    });\n    vm.$el && vm.forceUpdate();\n  }\n\n  return {\n    vm,\n    mount,\n    ...data,\n    use,\n    $,\n  };\n}\n\nexport { createApp, onMounted, updateActiveId, mountHandleList };\n","import { createApp, onMounted } from '@sugar/sugar-core';\nimport { nextTick, ref, reactive, watch, defineProps } from '@sugar/sugar-reactive';\nimport { Component } from '@sugar/sugar-render';\nimport { sugarCompiler } from '@sugar/sugar-compiler';\n\nif (typeof window !== 'undefined') {\n  (function (global: any) {\n    global.SUGAR = {\n      onMounted,\n      createApp,\n      nextTick,\n      ref,\n      Component,\n      reactive,\n      watch,\n      defineProps,\n    };\n  })(window);\n}\n\nexport {\n  createApp,\n  onMounted,\n  nextTick,\n  ref,\n  Component,\n  reactive,\n  watch,\n  sugarCompiler,\n  defineProps,\n};\n"],"names":["mountHandleList","ActiveId","onMounted","handle","updateActiveId","id","isArray","extend","isSimpleIdentifier","exp","isStaticExpression","dynamicKeywords","keyword","scopeStack","enterScope","newScope","exitScope","parse","context","ancestors","parent","last","nodes","isEnd","node","startsWith","parseInterpolation","advanceBy","parseTag","parseComment","parseElement","parseText","i","pushNode","removedWhitespace","shouldCondense","prev","next","first","parseAttributes","type","props","attributeNames","firstTagMatch","aliases","advanceSpaces","attr","parseAttribute","bindCtx","tar","nameSet","start","getPos","name","value","parseAttributeValue","loc","getSelection","match","isPropShorthand","dirName","arg","isSlot","startOffset","getNewPosition","content","valueLoc","advancePosWithClone","modifiers","numberOfCharacters","quote","isQuoted","endIndex","parseTextData","element","children","startsWithEndTagOpen","tag","isSelfClosing","Namespaces","contentStart","closeIndex","s","open","close","innerStart","innerEnd","rawContentLength","rawContent","preTrimContent","matchText","advancePos","endOffset","endTokens","index","length","rawText","end","source","pos","linesCount","lastNewLinePos","searchString","xs","column","line","offset","NodeTypes","jsGlobals","code","varName","fullText","before","inSingleQuotes","inDoubleQuotes","inBacktick","prevChar","hasScope","flattenArray","arr","result","item","NO","toAst","template","createBaseContent","nodeOps","child","anchor","val","isDef","v","isUndef","escape2Html","str","arrEntities","all","t","p1","is","deepClone","weakMap","strict","newSet","newMap","newArr","newObj","key","symbolKeys","sKey","guid","c","r","addCSS","cssText","style","head","func","textNode","transform","helpers","work","prop","sIf","generate","ast","genElmChildren","getElm","elStr","ex","dealAttr","dealEvent","transformFor","loadingRender","createElementString","forStatment","elementStr","funString","Array2String","a","sFor","forMatch","reg","sHtml","sLoading","transformEvent","eventStr","sModel","baseCompile","sugarCompiler","compile","root","createFunction","isComponent","vnode","components","componentCache","addComponentCache","sugar","getComponentCache","callbacks","pending","flushCallbacks","copies","nextTick","cb","_resolve","resolve","reject","jobQueue","isFlushing","queueJob","job","targetMap","activeEffect","effect","fn","wrapper","track","target","depsMap","deps","trigger","effects","watch","getter","isRef","traverse","oldValue","onEffect","newValue","seen","ref","rawValue","newVal","reactive","obj","receiver","res","oldVal","defineProps","options","bulkComponent","_vnode","parentComponent","attrs","on","_sugar","slot","propName","app","makeComponent","instance","appId","data","mounted","update","componentRender","$","vm","use","acc","cur","d","mount","forceUpdate","updateSlot","component","render","bindT","vmFiber","VmDataRefPassive","assembling","patch","_n","isDefault","NamedSlot","oldSlot","newSlot","Component","newVnode","oldVnode","emptyNodeAt","isSameNode","patchVnode","createElement","domNode","_vei","event","e","childrenDom","getComponentName","updateComponent","bindComponentInstance","patchProps","updateChildren","oldAttrs","elm","patchAttrs","patchEvents","el","newAttrs","parentDom","oldCh","newCh","clearEmptyVnode","oldPreIndex","oldAftIndex","newPreIndex","newAftIndex","oldSNode","oldENode","newSNode","newENode","oldKeyToIdx","idxInOld","elmToMove","refElm","createKeyToOldIdx","beginIdx","endIdx","map","VNode","o","n","newOn","eventName","Vnodes","Vnode","vNode","VNode$1","sugarRender","serializer","htmlCode","_c","_v","_s","_e","_html","html","html2Vnode","_loop","fun","vnodeChildren","dom","div","initCSS","createApp","global"],"mappings":"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"}