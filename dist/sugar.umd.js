(function(_,$){typeof exports=="object"&&typeof module<"u"?$(exports):typeof define=="function"&&define.amd?define(["exports"],$):(_=typeof globalThis<"u"?globalThis:_||self,$(_.Sugar={}))})(this,(function(_){"use strict";let $={},L="";function gt(t){$[L]||($[L]=[]),$[L].push({used:!1,fun:t})}function dt(t){L=t}const Ht=Array.isArray,Wt=Object.assign;function Xt(t){return/^[A-Za-z_$][\w$]*$/.test(t)}function qt(t){if(Xt(t))return!0;const e=["(",")","=>","+","-","*","/",".","[","]"];for(const n of e)if(t.includes(n))return!1;return!0}const H=[];function ht(t){H.push(t)}function Kt(){H.pop()}function pt(t,e){const n=X(e),i=[];for(;!Vt(t,e);){const s=t.source;let l;if(O(s,t.options.delimiters[0]))l=te(t);else if(s[0]==="<"&&s.length!==1)if(s[1]==="/")if(s[2]===">"){E(t,3);continue}else if(/[a-z]/i.test(s[2])){W(t,1);continue}else l=_t(t);else/[a-z]/i.test(s[1])?l=Yt(t,e):s[1]==="!"&&(l=_t(t));if(l||(l=ee(t)),Ht(l))for(let a=0;a<l.length;a++)St(i,l[a]);else St(i,l)}let o=!1;const r=t.options.whitespace!=="preserve";for(let s=0;s<i.length;s++){const l=i[s];if(l.type===2)if(t.inPre)l.content=l.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(l.content))r&&(l.content=l.content.replace(/[\t\r\n\f ]+/g," "));else{const a=i[s-1],u=i[s+1];!a||!u||r&&(a.type===3&&u.type===3||a.type===3&&u.type===1||a.type===1&&u.type===3||a.type===1&&u.type===1&&/[\r\n]/.test(l.content))?(o=!0,i[s]=null):l.content=" "}else l.type===3&&!t.options.comments&&(o=!0,i[s]=null)}if(t.inPre&&n&&t.options.isPreTag(n.tag)){const s=i[0];s&&s.type===2&&(s.content=s.content.replace(/^\r?\n/,""))}return o?i.filter(Boolean):i}function Qt(t,e){const n=[],i=new Set,o=t.source.slice(0,t.source.indexOf(">")).match(/s-for\s*=\s*["']\s*\(([^)]+)\)\s+in\s+[^"']+["']/);if(o){const r=o[1].split(",").map(s=>s.trim());ht(r)}else e===0&&ht([]);for(;t.source.length>0&&!O(t.source,">")&&!O(t.source,"/>");){if(O(t.source,"/")){E(t,1),j(t);continue}const r=Zt(t,i);if(["s-if","s-html"].includes(r.name)&&(r.value.content=F(r.value.content)),r.name==="s-for"){const s=r.value.content.split(" in ");r.value.content=s[0]+" in "+F(s[1])}r.type===6&&r.value&&r.name==="class"&&(r.value.content=r.value.content.replace(/\s+/g," ").trim()),e===0&&n.push(r),j(t)}return n}function Zt(t,e){const n=T(t),o=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(t.source)[0];e.add(o),E(t,o.length);let r;/^[\t\r\n\f ]*=/.test(t.source)&&(j(t),E(t,1),j(t),r=Jt(t));const s=v(t,n);if(!t.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(o)){const l=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(o),a=O(o,"."),u=l[1]||(a||O(o,":")?"bind":O(o,"@")||O(o,"s-on:")?"on":"slot");let c;if(l[2]){const m=u==="slot",h=o.lastIndexOf(l[2],o.length-(l[3]?.length||0)),g=v(t,yt(t,n,h),yt(t,n,h+l[2].length+(m&&l[3]||"").length));let p=l[2];p.startsWith("[")?p.endsWith("]")?p=p.slice(1,p.length-1):p=p.slice(1):m&&(p+=l[3]||""),c={type:4,content:p,loc:g}}if(r?.isQuoted){const m=r.loc;m.start.offset++,m.start.column++,m.end=bt(m.start,r.content),m.source=m.source.slice(1,-1)}const f=l[3]?l[3].slice(1).split("."):[];return a&&f.push("prop"),{type:7,name:u,exp:r&&{type:4,content:F(r.content),loc:r.loc,isStatic:!qt(r.content)},arg:c,modifiers:f,loc:s}}return{type:6,name:o,value:r&&{type:2,content:r.content,loc:r.loc},loc:s}}function yt(t,e,n){return bt(e,t.originalSource.slice(e.offset,n),n)}function Jt(t){const e=T(t);let n;const i=t.source[0],o=i==='"'||i==="'";if(o){E(t,1);const r=t.source.indexOf(i);r===-1?n=U(t,t.source.length):(n=U(t,r),E(t,1))}else{const r=/^[^\t\r\n\f >]+/.exec(t.source);if(!r)return;n=U(t,r[0].length)}return{content:n,isQuoted:o,loc:v(t,e)}}function St(t,e){if(e.type===2){const n=X(t);if(n&&n.type===2&&n.loc.end.offset===e.loc.start.offset){n.content+=e.content,n.loc.end=e.loc.end,n.loc.source+=e.loc.source;return}}t.push(e)}function Yt(t,e){X(e);const n=W(t,0);if(n.isSelfClosing||t.options.isVoidTag(n.tag))return n;e.push(n);const i=pt(t,e);return e.pop(),n.children=i,Ot(t.source,n.tag)&&W(t,1),n.loc=v(t,n.loc.start),n}function W(t,e,n){const i=T(t),o=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(t.source),r=o[1];E(t,o[0].length),j(t);const s=Qt(t,e);let l=!1;if(t.source.length!==0&&(l=O(t.source,"/>"),E(t,l?2:1)),e===1){Kt();return}return{type:1,tag:r,tagType:0,children:[],props:s,isSelfClosing:l,loc:v(t,i)}}var Et=(t=>(t[t.HTML=0]="HTML",t))(Et||{});function _t(t){const e=T(t),n=t.source[1]==="?"?1:2;let i;const o=t.source.indexOf("-->")+2;return o===-1?(i=t.source.slice(n),E(t,t.source.length)):(i=t.source.slice(n,o),E(t,o+1)),{type:3,content:i,loc:v(t,e)}}function Vt(t,e){const n=t.source;if(O(n,"</")){for(let i=e.length-1;i>=0;--i)if(Ot(n,e[i].tag))return!0}return!n}function te(t){const[e,n]=t.options.delimiters,i=t.source.indexOf(n,e.length),o=T(t);E(t,e.length);const r=T(t),s=T(t),l=i-e.length,a=t.source.slice(0,l),u=ne(t,l),c=u.trim(),f=u.indexOf(c);f>0&&N(r,a,f);const m=l-(u.length-c.length-f);return N(s,a,m),E(t,n.length),{type:5,content:{type:4,content:F(c),loc:v(t,r,s)},loc:v(t,o)}}function ee(t){const e=["<",t.options.delimiters[0]];let n=t.source.length;for(let r=0;r<e.length;r++){const s=t.source.indexOf(e[r],1);s!==-1&&n>s&&(n=s)}const i=T(t);return{type:2,content:U(t,n),loc:v(t,i)}}function U(t,e){const n=t.source.slice(0,e);return E(t,e),n}function v(t,e,n){return n=n||T(t),{start:e,end:n,source:t.originalSource.slice(e.offset,n.offset)}}function ne(t,e){const n=t.source.slice(0,e);return E(t,e),n}function E(t,e){const{source:n}=t;N(t,n,e),t.source=n.slice(e)}function N(t,e,n=e.length){let i=0,o=-1;for(let r=0;r<n;r++)e.charCodeAt(r)===10&&(i++,o=r);return t.offset+=n,t.line+=i,t.column=o===-1?t.column+n:n-o,t}function bt(t,e,n=e.length){return N(Wt({},t),e,n)}function j(t){const e=/^[\t\r\n\f ]+/.exec(t.source);e&&E(t,e[0].length)}function O(t,e){return t.startsWith(e)}function Ot(t,e){return O(t,"</")&&t.slice(2,2+e.length).toLowerCase()===e.toLowerCase()&&/[\t\r\n\f />]/.test(t[2+e.length]||">")}function X(t){return t[t.length-1]}function T(t){const{column:e,line:n,offset:i}=t;return{column:e,line:n,offset:i}}var I=(t=>(t[t.ROOT=0]="ROOT",t[t.ELEMENT=1]="ELEMENT",t[t.TEXT=2]="TEXT",t[t.COMMENT=3]="COMMENT",t[t.SIMPLE_EXPRESSION=4]="SIMPLE_EXPRESSION",t[t.INTERPOLATION=5]="INTERPOLATION",t[t.ATTRIBUTE=6]="ATTRIBUTE",t[t.DIRECTIVE=7]="DIRECTIVE",t[t.COMPOUND_EXPRESSION=8]="COMPOUND_EXPRESSION",t[t.COMPONENT=9]="COMPONENT",t[t.SLOT=10]="SLOT",t))(I||{});const ie=new Set(["true","false","null","undefined","NaN","Infinity","Object","Function","Boolean","Symbol","Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","Number","BigInt","Math","Date","String","RegExp","Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","window","globalThis","console","alert","setTimeout","setInterval","clearTimeout","clearInterval","requestAnimationFrame","cancelAnimationFrame","document","location","history","navigator","await","async","arguments","this"]);function F(t){return t.replace(/\b([a-zA-Z_$][a-zA-Z0-9_$]*)\b/g,(e,n,i,o)=>{const r=o.slice(0,i),s=/'[^']*$/.test(r)&&/[^']*'/.test(o.slice(i)),l=/"[^"]*$/.test(r)&&/[^"]*"/.test(o.slice(i)),a=/`[^`]*$/.test(r)&&/[^`]*`/.test(o.slice(i));if(s||l||a)return e;const u=o[i-1];return u==="."||u===":"||re(n)||ie.has(n)?e:`_ctx_.${n}`})}function At(t){const e=[];for(const n of t)Array.isArray(n)?e.push(...At(n)):e.push(n);return e}function re(t){return At(H).includes(t)}const q=t=>!1;function K(t){const e=se(t);return pt(e,[])[0]}function se(t){return{column:1,line:1,offset:0,originalSource:t,source:t,inPre:!1,inVPre:!1,options:{delimiters:["{{","}}"],isVoidTag:q,isPreTag:q,isCustomElement:q,getNamespace:(e,n)=>Et.HTML}}}const M={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},parentNode:t=>t.parentNode},k=t=>t instanceof Array;function $t(t){return t!=null}function Q(t){return t==null}function oe(t){const e={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(n,i){return e[i]}).replace(/<[^>]+s-on:([^>]+)>/gi,function(n,i){return n.replace(/s-on:/g,"@")})}const A={Array:Array.isArray,Date:t=>t instanceof Date,Set:t=>Object.prototype.toString.call(t)==="[object Set]",Map:t=>Object.prototype.toString.call(t)==="[object Map]",Object:t=>Object.prototype.toString.call(t)==="[object Object]",Symbol:t=>Object.prototype.toString.call(t)==="[object Symbol]",Function:t=>Object.prototype.toString.call(t)==="[object Function]"};function R(t,e=new WeakMap,n=!1){if(A.Function(t)&&n)return/^function/.test(t.toString())||/^\(\)/.test(t.toString())?new Function("return "+t.toString())():new Function("return function "+t.toString())();if(A.Function(t))return t;if(A.Date(t))return new Date(t.valueOf());if(A.Symbol(t))return Symbol(t.description);if(A.Set(t)){const r=new Set;for(const s of t)r.add(R(s),e);return r}if(A.Map(t)){const r=new Map;for(const s of t)r.set(R(s[0],e),R(s[1],e));return r}if(e.has(t))return e.get(t);if(A.Array(t)){const r=[];for(const s in t)r[s]=R(t[s],e);return r}if(!A.Object(t))return t;const i=A.Array(t)?[]:{};e.set(t,i);for(const r in t)A.Array(t[r])&&R(t[r],e),e.set(t,i),i[r]=R(t[r],e);const o=Object.getOwnPropertySymbols(t);for(const r of o)i[r]=R(t[r],e);return i}function vt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function ce(t){const e=document.createElement("style"),n=document.head||document.getElementsByTagName("head")[0];if(e.type="text/css",e.styleSheet){const i=function(){try{e.styleSheet.cssText=t}catch{}};e.styleSheet.disabled?setTimeout(i,10):i()}else{const i=document.createTextNode(t);e.appendChild(i)}n.appendChild(e)}function Z(t,e){function n(i){i.props?.forEach(r=>{r.name==="s-if"&&e.sIf(i,r),r.name==="s-for"&&e.sFor(i,r),r.name==="s-html"&&e.sHtml(i,r),r.name==="s-model"&&e.sModel(i,r),r.name==="s-loading"&&e.sLoading(i,r)}),i.tag==="slot"&&(i.type=I.SLOT),i.children&&i.children.forEach(r=>{n(r)})}return n(t),t}function J(t,e){t.if={value:e.value.content,type:e.value.type}}function B(t){const e=(r=[])=>{let s="[";return r.forEach((l,a)=>{l.type===I.ELEMENT||l.type===I.INTERPOLATION||l.type===I.SLOT?s+=n(l)+`${a===r.length-1?"":","}`:l.type===I.TEXT&&l.content.trim()&&(s+=n(l)+`${a===r.length-1?"":","}`)}),s+"]"};function n(r){let s="";const l=r.props;if(r.type===1||r.type===I.SLOT){let a="",u=!1;if(a+=`_ctx_._SUGAR._c('${r.tag}',{ `,a+='"attrs":{',a+=Y(l),a+='},"on":{',a+=V(l),a+="}},",r.children?a+=e(r.children):a+="[]",a+=")",r.forStatment&&(u=!0,s+=o(r)),r.if&&!r.forStatment&&(u=!0,s=`${r.if.value} ? ${s+a} : _ctx_._SUGAR._e()`),r.loading&&!r.forStatment){u=!0;const c=B(Z(K(`<div class="s-loading" s-if="${r.loading.value}">
        <svg t="1734417183543" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4603" width="30" height="30"><path d="M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z" p-id="4604" fill="#8a8a8a"></path></svg>
        </div>`),{sIf:J}));s=`_ctx_._SUGAR._c('div',{attrs:{style:'position:relative'},on:{}},[${s+(r.if?"":a)},${c}])`}r.htmlStatment&&(u=!0,s=`_ctx_._SUGAR._c('div',{attrs:{${Y(l)}},on:{${V(l)}}},[_ctx_._SUGAR._html(${r.htmlStatment.value.content})])`),u||(s+=a)}else r.type===I.INTERPOLATION?s+=`_ctx_._SUGAR._v(_ctx_._SUGAR._s(${r.content.content}))`:r.type===I.TEXT&&(s+=`_ctx_._SUGAR._v(decodeURIComponent("${encodeURIComponent(r.content)}"))`);return s}return n(t);function i(r,s,l){let a=`_ctx_._SUGAR._c('${r}',{`;return a+='"attrs":{',a+=Y(s),a+='},"on":{',a+=V(s),a+="}},[",l.forEach((u,c)=>{a+=B(u),c<l.length-1&&(a+=",")}),a+="])",s.forEach(u=>{if(u.name==="s-if"&&(a=`${u.value.content} ? ${a} : _ctx_._SUGAR._e()`),u.name==="s-loading"&&u.value){const c=B(Z(K(`<div class="s-loading" s-if="${u.value.content}">
          <svg t="1734417183543" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4603" width="30" height="30"><path d="M512 64c247.2 0 448 200.8 448 448h-64c0-212-172-384-384-384V64z m0 832c-212 0-384-172-384-384H64c0 247.2 200.8 448 448 448v-64z" p-id="4604" fill="#8a8a8a"></path></svg>
        </div>`),{sIf:J}));a=`_ctx_._SUGAR._c('div',{attrs:{style:'position:relative'},on:{}},[${a},${c}])`}}),a}function o(r){const s=r.forStatment,l=i(r.tag,r.props,r.children);return`..._ctx_._SUGAR._loop((${s.item}${s.index?","+s.index:""})=>{
      return ${l}
    },${s.exp})`}}function Y(t){let e="";return t=t.filter(n=>n.name!=="s-if"&&n.name!=="s-for"&&n.name!=="on"&&n.name!=="s-loading"&&n.name!=="s-html"),t.forEach((n,i)=>{n.name!=="s-if"&&n.name!=="s-for"&&n.name!=="on"&&n.name!=="bind"&&n.name!=="slot"&&n.name!=="s-html"?e+=`"${n.name}":"${n.value.content}"`:n.name==="bind"?e+=`"${n.arg.content}":${n.exp.content}`:n.name==="slot"&&(e+=`"slot":"${n.arg.content}"`),n.name!=="s-if"&&n.name!=="s-for"&&n.name!=="on"&&i<t.length-1&&(e+=",")}),e}function V(t){let e="";return t=t.filter(n=>n.name==="on"),t.forEach((n,i)=>{if(n.name==="on"){let o=`${n.exp.content}`;n.exp.isStatic&&(o=`(e)=>{${n.exp.content}}`),e+=`"${n.arg.content}":{"value":${o},"isStatic":${n.exp.isStatic},"modifiers":[${ae(n.modifiers)}]}`,n.name==="on"&&i<t.length-1&&(e+=",")}}),e}function ae(t){return k(t)?t.map(e=>`"${e}"`):""}function fe(t,e){const n=e.value.content.split(" in "),i=new RegExp("(?<=\\()(.+?)(?=\\))");n[0]=n[0].match(i)?n[0].match(i)[0].split(","):n[0],t.forStatment={exp:n[1],item:k(n[0])?n[0][0]:n[0],index:k(n[0])?n[0][1]:null}}function le(t,e){t.htmlStatment={value:e.value}}function ue(t,e){t.loading={value:e.value.content,type:e.value.type}}function me(t,e){if(e.exp.content.includes("(")&&e.exp.content.includes(")")){const n=e.exp.content;e.exp.content=e.exp.content.substring(0,n.indexOf("(")),e.exp.parameters=n.substring(n.indexOf("(")+1,n.length-1).split(",")}}function ge(t,e){t.props.push({type:7,name:"on",exp:{type:4,content:`_ctx_.${e.value.content} = e.target.value`,isStatic:!0},arg:{type:4,content:"input"},modifiers:[]}),t.props.push({type:7,name:"bind",exp:{type:4,content:`_ctx_.${e.value.content}`},arg:{type:4,content:"value"},modifiers:[]})}function de(t){const e=K(t);return Z(e,{sIf:J,sFor:fe,sHtml:le,sLoading:ue,transformEvent:me,sModel:ge}),{root:e,code:B(e)}}function tt(t){function e(i=""){const{code:o,root:r}=de(i);return{code:n(o),root:r}}function n(i=""){return new Function(`    const _ctx_ = this;
    const proxy = new Proxy({}, {
      get(target, prop, receiver) {
        if (prop in ctx) {
          return ctx[prop];
        }
        throw new ReferenceError(\`Missing variable \${String(prop)} in template\`);
      }
    });
    return ${i.toString()};
  `)}return e(t)}function et(t,e){return!!e[t.tag]||t.tag==="component"}const Tt={};function he(t,e){Tt[e]=t}function It(t){return Tt[t]}const nt=[];let it=!1;function pe(){it=!1;const t=nt.slice(0);nt.length=0;for(let e=0;e<t.length;e++)t[e]()}async function rt(t){let e;if(nt.push(()=>{t?t():e&&e()}),it||(it=!0,Promise.resolve().then(pe)),!t)return await new Promise((n,i)=>{e=n})}const st=new Set;let ot=!1;function ye(t){st.add(t),ot||(ot=!0,Promise.resolve().then(()=>{for(const e of st)e();st.clear(),ot=!1}))}const ct=new WeakMap;let C=null;function at(t){const e=()=>{C=e,t(),C=null};return e(),e}function Rt(t,e){if(!C)return;let n=ct.get(t);n||(n=new Map,ct.set(t,n));let i=n.get(e);i||(i=new Set,n.set(e,i)),i.add(C)}function Pt(t,e){const n=ct.get(t);if(!n)return;const i=n.get(e);if(i)for(const o of i)ye(o)}function kt(t,e){let n;typeof t=="function"?n=t:xt(t)?n=()=>t.value:n=()=>ft(t);let i;function o(){const r=n();e(r,i),i=r}at(o)}function xt(t){return t&&typeof t=="object"&&t.__isRef}function ft(t,e=new Set){if(!(typeof t!="object"||t===null||e.has(t))){if(e.add(t),xt(t))ft(t.value,e);else for(const n in t)ft(t[n],e);return t}}function jt(t){let e=t;return{get value(){return Rt(this,"value"),e},set value(n){n!==e&&(e=n,Pt(this,"value"))},__isRef:!0}}function G(t){return new Proxy(t,{get(e,n,i){const o=Reflect.get(e,n,i);return Rt(e,n),typeof o=="object"&&o!==null?G(o):o},set(e,n,i,o){const r=e[n],s=Reflect.set(e,n,i,o);return r!==i&&Pt(e,n),s}})}function Mt(t){return t||{}}function Lt(t,e){const{data:{attrs:n,on:i},children:o}=t,r=R(e),s=G({}),l=o;if(Object.keys(n).forEach(u=>{u!=="ref"&&(s[u]=n[u])}),Object.keys(i).forEach(u=>{i[u].parameters?s[u]=function(){i[u].value(...i[u].parameters)}:s[u]=i[u].value}),t.key&&It(t.key))return It(t.key);const a=Se({...r,props:s,slot:l});return a.mount(),t.key&&he(a,t.key),a}function Se(t){const e=vt();dt(e);const n=t.bulk(t.props),{mounted:i,update:o}=Ee(),r={},s={render:t.render,_vnode:null,data:n,$el:null,appId:e,components:t.components?t.components:[],sugar:{},slot:t.slot,props:t.props,headTag:t.headTag||"div",use:c};k(s.components)&&(s.components=s.components.reduce((f,m)=>(f[m.name]=m,f),{})),Object.values(n).forEach(f=>{f.headTag&&f.render&&f.name&&f.bulk&&c(f)});function l(){i(s,n),$[e]?.forEach(f=>{f.fun(),f.used=!0}),at(()=>{o(s)})}function a(){o(s)}function u(f){s.slot=f,o(s)}function c(f){k(f)||(f=[f]),f.forEach(m=>{m.name?(s.components[m.name]=m,s.components[m.name].components=s.components):m.fun&&(r[m.fun]=m.bulk)})}return{vm:s,mount:l,...n,updateSlot:u,forceUpdate:a,use:c,$:r}}function Ee(){let t=null;function e(s,l){s.$el=document.createElement(s.headTag),s._vnode=s.$el,t=s.render,Gt(s,l),s.forceUpdate=function(){n(s)}}function n(s){const l=lt(s),a=t.call(lt(s));s.slot.length&&i(a,s.slot),Nt(l,a),l._vnode=a}function i(s,l){for(let a=0;a<s.children.length;a++){const u=s.children[a];if(u.tag==="slot"&&o(l)&&u.data.attrs?.name==="default")s.children.splice(0,1,...l);else if(u.tag==="slot"&&u.data.attrs?.name){const c=l.find(f=>f.data?.attrs.slot===u.data.attrs.name);r(u,c,s.children)}else u.children?.length&&i(u,l)}}function o(s){return!s.find(l=>!!l.data?.attrs.slot)}function r(s,l,a){if(!l){a.splice(a.indexOf(s),1,[]);return}a.splice(a.indexOf(s),1,...l.children)}return{update:n,mounted:e}}function Ut(t){const{code:e,root:n}=tt(t.render);return{...t,render:e,headTag:n.tag}}function Nt(t,e){let n=t._vnode;n.elm||(n=be(n)),x(n,e)?r(e,n):n.elm?.parentNode&&e?(M.insert(i(e),M.parentNode(n.elm),n.elm),M.remove(n.elm)):r(e,n);function i(c){let f;if(c.tag){if(typeof c.tag=="string"&&!et(c,t.components)){if(c.tag==="component"&&c.data.attrs.is){const d=Lt(c,c.data.attrs.is);c.elm=d.vm.$el,c._sugar=d,f=c.elm,c.data.attrs.ref&&c.data.attrs.ref in t&&(t[c.data.attrs.ref]=d)}else c.tag==="svg"||c.tag==="path"?f=document.createElementNS("http://www.w3.org/2000/svg",c.tag):f=document.createElement(c.tag);const{data:m={}}=c||{},{attrs:h={},on:g={}}=m;for(const d in h)if(Object.hasOwnProperty.call(h,d)){const y=h[d];f.setAttribute(d,y),d==="ref"&&y in t&&(t[y]=f)}const p=f._vei||(f._vei={});for(const d in g)if(Object.hasOwnProperty.call(g,d)&&g[d].value){const y=b=>{g[d].value(b),g[d].modifiers.includes("stop")&&b.stopPropagation(),g[d].modifiers.includes("prevent")&&b.preventDefault()};f.addEventListener(d,y),p[d]=y}if(c.children)for(let d=0;d<c.children.length;d++){const y=i(c.children[d]);y&&f.append(y)}}else if(et(c,t.components)){const m=Lt(c,t.components[o(c,t)]);c.elm=m.vm.$el,c._sugar=m,f=c.elm,c.data.attrs.ref&&c.data.attrs.ref in t&&(t[c.data.attrs.ref]=m)}}else c.text!==void 0?f=document.createTextNode(c.text):c.elm!==void 0&&(f=c.elm);return c.elm=f,f}function o(c,f){return c.tag==="component"?(f.use(c.data.attrs.is),c.data.attrs.is.name):c.tag}function r(c,f){if(et(c,t.components)){if(f._sugar)_e(c,f),Bt(c,t);else{const m=i(c);M.insert(m,M.parentNode(f.elm),f.elm),f.elm.remove(),f.elm=m}return}if(c.elm=f.elm,c.text!==void 0)f.text!==c.text&&(f.elm.nodeValue=c.text);else if(c.tag){if(s(c,f,t),f.children?.length)a(f.elm,f.children,c.children);else if(c.children.length>0){f.elm.innerHTML="";for(let m=0;m<c.children.length;m++){const h=i(c.children[m]);h&&f.elm.appendChild(h)}}}}function s(c,f,m){const h=c.data.attrs,g=c.data.on,p=f.data.attrs,d=c.elm;l(d,p,h,m),Oe(d,g)}function l(c,f,m,h){f&&Object.keys(f).forEach(g=>{m[g]!==f[g]&&c.removeAttribute(g)}),Object.keys(m).forEach(g=>{g==="value"&&(c.value=m[g]),(!f||m[g]!==f[g])&&c.setAttribute(g,m[g]),g==="ref"&&m[g]in h&&(h[m[g]]=c)})}function a(c,f,m){f=Ft(f),m=Ft(m);let h=0,g=f.length-1,p=0,d=m.length-1,y=f[h],b=f[g],S=m[p],P=m[d],ut,w,z,mt;for(;h<=g&&p<=d;)!y||!f[h]?y=f[++h]:!b||!f[g]?b=f[--g]:!S||!m[p]?S=m[++p]:!P||!m[d]?P=m[--d]:x(S,y)?(r(S,y),y=f[++h],S=m[++p]):x(S,b)?(r(S,b),c.insertBefore(b.elm,y.elm),b=f[--g],S=m[++p]):x(P,y)?(r(P,y),c.insertBefore(y.elm,b.elm.nextSibling),y=f[++h],P=m[--d]):x(P,b)?(r(P,b),b=f[--g],P=m[--d]):(Q(ut)&&(ut=u(f,h,g)),w=$t(S.key)?ut[S.key]:null,Q(w)?(c.insertBefore(i(S),y.elm),S=m[++p]):(z=f[w],x(z,S)?(r(S,z),f[w]=void 0,c.insertBefore(z.elm,y.elm)):c.insertBefore(i(S),y.elm),S=m[++p]));if(h>g)for(mt=Q(m[d+1])?null:m[d+1].elm;p<=d;p++)mt?c.insertBefore(i(m[p]),mt):c.append(i(m[p]));if(p>d)for(let D=h;D<=g;D++)f[D]?.elm&&c.removeChild(f[D].elm)}function u(c,f,m){let h,g;const p={};for(h=f;h<=m;++h)g=c[h].key,$t(g)&&(p[g]=h);return p}}function _e(t,e){Object.keys(e._sugar.vm.props).forEach(n=>{const{attrs:i,on:o}=t.data;Object.keys(i).includes(n)?e._sugar.vm.props[n]=t.data.attrs[n]:Object.keys(o).includes(n)&&(t.data.on[n].parameters?e._sugar.vm.props[n]=function(){t.data.on[n].value(...t.data.on[n].parameters)}:e._sugar.vm.props[n]=t.data.on[n].value)}),e._sugar.updateSlot(t.children),t.elm=e.elm,t._sugar=e._sugar}function be(t){return new Ae(t.tagName.toLowerCase(),{},[],t)}function x(t,e){return t.key===e.key&&t.tag===e.tag}function Oe(t,e){const n=t._vei||(t._vei={});Object.keys(n).forEach(i=>{t.removeEventListener(i,n[i])}),Object.keys(e).forEach(i=>{n[i]=o=>{e[i].modifiers.includes("stop")&&o.stopPropagation(),e[i].modifiers.includes("prevent")&&o.preventDefault(),e[i].value(o)},t.addEventListener(i,n[i])})}function Ft(t){return t.filter(e=>e.tag||e.text===""||e.text||e.elm)}function Bt(t,e){const n=t.data;if(n){const i=n.attrs;i.ref&&e[i.ref]in e&&(e[i.ref]=t.elm)}t.children&&t.children.forEach(i=>{Bt(i,e)})}let Ae=class{tag;data;elm;context;text;key;_sugar;constructor(e,n,i,o){this.tag=e,this.data=n,this.children=i,this.key=n.attrs?.key,this.elm=o,this.context=void 0,this.text=void 0}};function $e(){let t=null;function e(i,o){const r=new XMLSerializer;if(i.render)t=i.render;else{const s=i.render?i.render:oe(r.serializeToString(i.$el)),{code:l}=tt(s);t=l}Gt(i,o),at(()=>{n(i)})}function n(i){const o=lt(i),r=t?.call(o);Nt(o,r),o._vnode=r}return{update:n,mounted:e}}function lt(t){return new Proxy(t,{get(e,n,i){const o=Reflect.get(e,n,i);return Ct(o)?o.value:o},set(e,n,i,o){const r=Reflect.get(e,n,o);return Ct(r)?r.value=i:Reflect.set(e,n,i),!0}})}function Ct(t){return!!t?.__isRef}function Gt(t,e){Object.keys(e).forEach(a=>{t[a]=e[a]});function n(a="div",u={},c=[]){return wt(a,u,c)}function i(a){const u=new zt;return u.text=a,u}function o(a){return String(a)}function r(){return{tag:"div",data:{attrs:{class:"s-block"},on:{}},children:[],elm:{_vei:{}}}}function s(a){return ve(a)}function l(a,u){const c=[];return u.forEach((f,m)=>{c.push({...a(f,m)})}),c}t._SUGAR={_c:n,_v:i,_s:o,_e:r,_loop:l,_html:s}}function wt(t="div",e={},n=[]){return((o="div",r={},s=[])=>{const l=[];return s&&s.length>0&&s.forEach(a=>{l.push(a)}),new zt(o,r,l)})(t,e,n)}class zt{tag;data;elm;context;text;key;sugar;constructor(e,n,i){this.tag=e,this.data=n,this.children=i,this.elm=void 0,this.context=void 0,this.text=void 0,this.key=n?.attrs?.key}}function ve(t){function e(i){const o={attrs:{},on:{}};Array.from(i.attributes).forEach(s=>{o.attrs[s.name]=s.value});const r=wt(i.tagName,o,[]);return Array.from(i.childNodes).forEach(s=>{s.nodeType===1?r.children.push(e(s)):s.nodeType===3&&r.children.push({tag:"",content:s.textContent,children:[],elm:void 0,text:s.textContent,key:void 0,data:void 0})}),r}const n=document.createElement("div");return n.innerHTML=t,e(n)}function Te(){ce(`
      .s-block{
        display:none;
      }
  
      .s-loading{
        position: absolute;
        background: rgba(255,255,255,0.8);
        z-index: 99999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .s-loading svg{
        animation: sLoading 1s linear infinite;
      }
  
      @keyframes sLoading {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
  
  `)}function Dt(t){const e=vt();dt(e);const n=t.bulk(t.props),i={},{mounted:o}=$e(),r={render:t.render,_vnode:null,data:n,$el:null,appId:e,components:t.components||[],sugar:{},slot:t.slot,forceUpdate:()=>{},use:l};k(r.components)&&(r.components=r.components.reduce((a,u)=>(a[u.name]=u,a),{}));function s(a){Te(),r._vnode=r.$el=typeof a=="string"?document.querySelector(`${a}`):a,o(r,n),rt(()=>{$[e]?.forEach(u=>{u.fun(),u.used=!0})})}function l(a){k(a)||(a=[a]),a.forEach(u=>{u.name?(r.components[u.name]=u,r.components[u.name].components=r.components):u.fun&&(i[u.fun]=u.bulk)}),r.$el&&r.forceUpdate()}return{vm:r,mount:s,...n,use:l,$:i}}typeof window<"u"&&(function(t){t.SUGAR={onMounted:gt,createApp:Dt,nextTick:rt,ref:jt,Component:Ut,reactive:G,watch:kt,defineProps:Mt}})(window),_.Component=Ut,_.createApp=Dt,_.defineProps=Mt,_.nextTick=rt,_.onMounted=gt,_.reactive=G,_.ref=jt,_.sugarCompiler=tt,_.watch=kt,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=sugar.umd.js.map
